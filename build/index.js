function V(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var I,P;function W(){return P||(P=1,I=function(t,e,n){if(t==null||e==null)return t;var i=String(t),s=typeof e=="number"?e:parseInt(e,10);if(isNaN(s)||!isFinite(s))return i;var d=i.length;if(d>=s)return i;var u=n==null?"":String(n);u===""&&(u=" ");for(var c=s-d;u.length<c;)u+=u;var o=u.length>c?u.substr(0,c):u;return i+o}),I}var G=W();const _=V(G);var T=9e15,A=function(){for(var t=[],e=-323;e<=308;e++)t.push(+("1e"+e));return function(n){return t[n+323]}}(),a=function(t){return t instanceof C?t:new C(t)},x=function(t,e){return new C().fromMantissaExponent(t,e)},$=function(t,e){return new C().fromMantissaExponent_noNormalize(t,e)};function Y(t,e,n,i){var s=e.mul(n.pow(i));return C.floor(t.div(s).mul(n.sub(1)).add(1).log10()/n.log10())}function J(t,e,n,i){return e.mul(n.pow(i)).mul(C.sub(1,n.pow(t))).div(C.sub(1,n))}var C=function(){function t(e){this.mantissa=NaN,this.exponent=NaN,e===void 0?(this.m=0,this.e=0):e instanceof t?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):this.fromString(e)}return Object.defineProperty(t.prototype,"m",{get:function(){return this.mantissa},set:function(e){this.mantissa=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"e",{get:function(){return this.exponent},set:function(e){this.exponent=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"s",{get:function(){return this.sign()},set:function(e){if(e===0)return this.e=0,void(this.m=0);this.sgn()!==e&&(this.m=-this.m)},enumerable:!1,configurable:!0}),t.fromMantissaExponent=function(e,n){return new t().fromMantissaExponent(e,n)},t.fromMantissaExponent_noNormalize=function(e,n){return new t().fromMantissaExponent_noNormalize(e,n)},t.fromDecimal=function(e){return new t().fromDecimal(e)},t.fromNumber=function(e){return new t().fromNumber(e)},t.fromString=function(e){return new t().fromString(e)},t.fromValue=function(e){return new t().fromValue(e)},t.fromValue_noAlloc=function(e){return e instanceof t?e:new t(e)},t.abs=function(e){return a(e).abs()},t.neg=function(e){return a(e).neg()},t.negate=function(e){return a(e).neg()},t.negated=function(e){return a(e).neg()},t.sign=function(e){return a(e).sign()},t.sgn=function(e){return a(e).sign()},t.round=function(e){return a(e).round()},t.floor=function(e){return a(e).floor()},t.ceil=function(e){return a(e).ceil()},t.trunc=function(e){return a(e).trunc()},t.add=function(e,n){return a(e).add(n)},t.plus=function(e,n){return a(e).add(n)},t.sub=function(e,n){return a(e).sub(n)},t.subtract=function(e,n){return a(e).sub(n)},t.minus=function(e,n){return a(e).sub(n)},t.mul=function(e,n){return a(e).mul(n)},t.multiply=function(e,n){return a(e).mul(n)},t.times=function(e,n){return a(e).mul(n)},t.div=function(e,n){return a(e).div(n)},t.divide=function(e,n){return a(e).div(n)},t.recip=function(e){return a(e).recip()},t.reciprocal=function(e){return a(e).recip()},t.reciprocate=function(e){return a(e).reciprocate()},t.cmp=function(e,n){return a(e).cmp(n)},t.compare=function(e,n){return a(e).cmp(n)},t.eq=function(e,n){return a(e).eq(n)},t.equals=function(e,n){return a(e).eq(n)},t.neq=function(e,n){return a(e).neq(n)},t.notEquals=function(e,n){return a(e).notEquals(n)},t.lt=function(e,n){return a(e).lt(n)},t.lte=function(e,n){return a(e).lte(n)},t.gt=function(e,n){return a(e).gt(n)},t.gte=function(e,n){return a(e).gte(n)},t.max=function(e,n){return a(e).max(n)},t.min=function(e,n){return a(e).min(n)},t.clamp=function(e,n,i){return a(e).clamp(n,i)},t.clampMin=function(e,n){return a(e).clampMin(n)},t.clampMax=function(e,n){return a(e).clampMax(n)},t.cmp_tolerance=function(e,n,i){return a(e).cmp_tolerance(n,i)},t.compare_tolerance=function(e,n,i){return a(e).cmp_tolerance(n,i)},t.eq_tolerance=function(e,n,i){return a(e).eq_tolerance(n,i)},t.equals_tolerance=function(e,n,i){return a(e).eq_tolerance(n,i)},t.neq_tolerance=function(e,n,i){return a(e).neq_tolerance(n,i)},t.notEquals_tolerance=function(e,n,i){return a(e).notEquals_tolerance(n,i)},t.lt_tolerance=function(e,n,i){return a(e).lt_tolerance(n,i)},t.lte_tolerance=function(e,n,i){return a(e).lte_tolerance(n,i)},t.gt_tolerance=function(e,n,i){return a(e).gt_tolerance(n,i)},t.gte_tolerance=function(e,n,i){return a(e).gte_tolerance(n,i)},t.log10=function(e){return a(e).log10()},t.absLog10=function(e){return a(e).absLog10()},t.pLog10=function(e){return a(e).pLog10()},t.log=function(e,n){return a(e).log(n)},t.log2=function(e){return a(e).log2()},t.ln=function(e){return a(e).ln()},t.logarithm=function(e,n){return a(e).logarithm(n)},t.pow10=function(e){return Number.isInteger(e)?$(1,e):x(Math.pow(10,e%1),Math.trunc(e))},t.pow=function(e,n){return typeof e=="number"&&e===10&&typeof n=="number"&&Number.isInteger(n)?$(1,n):a(e).pow(n)},t.exp=function(e){return a(e).exp()},t.sqr=function(e){return a(e).sqr()},t.sqrt=function(e){return a(e).sqrt()},t.cube=function(e){return a(e).cube()},t.cbrt=function(e){return a(e).cbrt()},t.dp=function(e){return a(e).dp()},t.decimalPlaces=function(e){return a(e).dp()},t.affordGeometricSeries=function(e,n,i,s){return Y(a(e),a(n),a(i),s)},t.sumGeometricSeries=function(e,n,i,s){return J(e,a(n),a(i),s)},t.affordArithmeticSeries=function(e,n,i,s){return function(d,u,c,o){var l=u.add(o.mul(c)).sub(c.div(2)),f=l.pow(2);return l.neg().add(f.add(c.mul(d).mul(2)).sqrt()).div(c).floor()}(a(e),a(n),a(i),a(s))},t.sumArithmeticSeries=function(e,n,i,s){return function(d,u,c,o){var l=u.add(o.mul(c));return d.div(2).mul(l.mul(2).plus(d.sub(1).mul(c)))}(a(e),a(n),a(i),a(s))},t.efficiencyOfPurchase=function(e,n,i){return function(s,d,u){return s.div(d).add(s.div(u))}(a(e),a(n),a(i))},t.randomDecimalForTesting=function(e){if(20*Math.random()<1)return $(0,0);var n=10*Math.random();10*Math.random()<1&&(n=Math.round(n)),n*=Math.sign(2*Math.random()-1);var i=Math.floor(Math.random()*e*2)-e;return x(n,i)},t.prototype.normalize=function(){if(this.m>=1&&this.m<10)return this;if(this.m===0)return this.m=0,this.e=0,this;var e=Math.floor(Math.log10(Math.abs(this.m)));return this.m=e===-324?10*this.m/1e-323:this.m/A(e),this.e+=e,this},t.prototype.fromMantissaExponent=function(e,n){return isFinite(e)&&isFinite(n)?(this.m=e,this.e=n,this.normalize(),this):(e=Number.NaN,n=Number.NaN,this)},t.prototype.fromMantissaExponent_noNormalize=function(e,n){return this.m=e,this.e=n,this},t.prototype.fromDecimal=function(e){return this.m=e.m,this.e=e.e,this},t.prototype.fromNumber=function(e){return isNaN(e)?(this.m=Number.NaN,this.e=Number.NaN):e===Number.POSITIVE_INFINITY?(this.m=1,this.e=T):e===Number.NEGATIVE_INFINITY?(this.m=-1,this.e=T):e===0?(this.m=0,this.e=0):(this.e=Math.floor(Math.log10(Math.abs(e))),this.m=this.e===-324?10*e/1e-323:e/A(this.e),this.normalize()),this},t.prototype.fromString=function(e){if(e.indexOf("e")!==-1){var n=e.split("e");this.m=parseFloat(n[0]),this.e=parseFloat(n[1]),this.normalize()}else if(e==="NaN")this.m=Number.NaN,this.e=Number.NaN;else if(this.fromNumber(parseFloat(e)),isNaN(this.m))throw Error("[DecimalError] Invalid argument: "+e);return this},t.prototype.fromValue=function(e){return e instanceof t?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.m=0,this.e=0,this)},t.prototype.toNumber=function(){if(!isFinite(this.e))return Number.NaN;if(this.e>308)return this.m>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;if(this.e<-324)return 0;if(this.e===-324)return this.m>0?5e-324:-5e-324;var e=this.m*A(this.e);if(!isFinite(e)||this.e<0)return e;var n=Math.round(e);return Math.abs(n-e)<1e-10?n:e},t.prototype.mantissaWithDecimalPlaces=function(e){if(isNaN(this.m)||isNaN(this.e))return Number.NaN;if(this.m===0)return 0;var n=e+1,i=Math.ceil(Math.log10(Math.abs(this.m))),s=Math.round(this.m*Math.pow(10,n-i))*Math.pow(10,i-n);return parseFloat(s.toFixed(Math.max(n-i,0)))},t.prototype.toString=function(){return isNaN(this.m)||isNaN(this.e)?"NaN":this.e>=T?this.m>0?"Infinity":"-Infinity":this.e<=-T||this.m===0?"0":this.e<21&&this.e>-7?this.toNumber().toString():this.m+"e"+(this.e>=0?"+":"")+this.e},t.prototype.toExponential=function(e){if(isNaN(this.m)||isNaN(this.e))return"NaN";if(this.e>=T)return this.m>0?"Infinity":"-Infinity";if(this.e<=-T||this.m===0)return"0"+(e>0?_(".",e+1,"0"):"")+"e+0";if(this.e>-324&&this.e<308)return this.toNumber().toExponential(e);isFinite(e)||(e=17);var n=e+1,i=Math.max(1,Math.ceil(Math.log10(Math.abs(this.m))));return(Math.round(this.m*Math.pow(10,n-i))*Math.pow(10,i-n)).toFixed(Math.max(n-i,0))+"e"+(this.e>=0?"+":"")+this.e},t.prototype.toFixed=function(e){return isNaN(this.m)||isNaN(this.e)?"NaN":this.e>=T?this.m>0?"Infinity":"-Infinity":this.e<=-T||this.m===0?"0"+(e>0?_(".",e+1,"0"):""):this.e>=17?this.m.toString().replace(".","").padEnd(this.e+1,"0")+(e>0?_(".",e+1,"0"):""):this.toNumber().toFixed(e)},t.prototype.toPrecision=function(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.e-1):this.toExponential(e-1)},t.prototype.valueOf=function(){return this.toString()},t.prototype.toJSON=function(){return this.toString()},t.prototype.toStringWithDecimalPlaces=function(e){return this.toExponential(e)},t.prototype.abs=function(){return $(Math.abs(this.m),this.e)},t.prototype.neg=function(){return $(-this.m,this.e)},t.prototype.negate=function(){return this.neg()},t.prototype.negated=function(){return this.neg()},t.prototype.sign=function(){return Math.sign(this.m)},t.prototype.sgn=function(){return this.sign()},t.prototype.round=function(){return this.e<-1?new t(0):this.e<17?new t(Math.round(this.toNumber())):this},t.prototype.floor=function(){return this.e<-1?Math.sign(this.m)>=0?new t(0):new t(-1):this.e<17?new t(Math.floor(this.toNumber())):this},t.prototype.ceil=function(){return this.e<-1?Math.sign(this.m)>0?new t(1):new t(0):this.e<17?new t(Math.ceil(this.toNumber())):this},t.prototype.trunc=function(){return this.e<0?new t(0):this.e<17?new t(Math.trunc(this.toNumber())):this},t.prototype.add=function(e){var n,i,s=a(e);if(this.m===0)return s;if(s.m===0)return this;if(this.e>=s.e?(n=this,i=s):(n=s,i=this),n.e-i.e>17)return n;var d=Math.round(1e14*n.m+1e14*i.m*A(i.e-n.e));return x(d,n.e-14)},t.prototype.plus=function(e){return this.add(e)},t.prototype.sub=function(e){return this.add(a(e).neg())},t.prototype.subtract=function(e){return this.sub(e)},t.prototype.minus=function(e){return this.sub(e)},t.prototype.mul=function(e){if(typeof e=="number")return e<1e307&&e>-1e307?x(this.m*e,this.e):x(1e-307*this.m*e,this.e+307);var n=typeof e=="string"?new t(e):e;return x(this.m*n.m,this.e+n.e)},t.prototype.multiply=function(e){return this.mul(e)},t.prototype.times=function(e){return this.mul(e)},t.prototype.div=function(e){return this.mul(a(e).recip())},t.prototype.divide=function(e){return this.div(e)},t.prototype.divideBy=function(e){return this.div(e)},t.prototype.dividedBy=function(e){return this.div(e)},t.prototype.recip=function(){return x(1/this.m,-this.e)},t.prototype.reciprocal=function(){return this.recip()},t.prototype.reciprocate=function(){return this.recip()},t.prototype.cmp=function(e){var n=a(e);if(this.m===0){if(n.m===0)return 0;if(n.m<0)return 1;if(n.m>0)return-1}if(n.m===0){if(this.m<0)return-1;if(this.m>0)return 1}if(this.m>0)return n.m<0||this.e>n.e?1:this.e<n.e?-1:this.m>n.m?1:this.m<n.m?-1:0;if(this.m<0)return n.m>0||this.e>n.e?-1:this.e<n.e||this.m>n.m?1:this.m<n.m?-1:0;throw Error("Unreachable code")},t.prototype.compare=function(e){return this.cmp(e)},t.prototype.eq=function(e){var n=a(e);return this.e===n.e&&this.m===n.m},t.prototype.equals=function(e){return this.eq(e)},t.prototype.neq=function(e){return!this.eq(e)},t.prototype.notEquals=function(e){return this.neq(e)},t.prototype.lt=function(e){var n=a(e);return this.m===0?n.m>0:n.m===0?this.m<=0:this.e===n.e?this.m<n.m:this.m>0?n.m>0&&this.e<n.e:n.m>0||this.e>n.e},t.prototype.lte=function(e){return!this.gt(e)},t.prototype.gt=function(e){var n=a(e);return this.m===0?n.m<0:n.m===0?this.m>0:this.e===n.e?this.m>n.m:this.m>0?n.m<0||this.e>n.e:n.m<0&&this.e<n.e},t.prototype.gte=function(e){return!this.lt(e)},t.prototype.max=function(e){var n=a(e);return this.lt(n)?n:this},t.prototype.min=function(e){var n=a(e);return this.gt(n)?n:this},t.prototype.clamp=function(e,n){return this.max(e).min(n)},t.prototype.clampMin=function(e){return this.max(e)},t.prototype.clampMax=function(e){return this.min(e)},t.prototype.cmp_tolerance=function(e,n){var i=a(e);return this.eq_tolerance(i,n)?0:this.cmp(i)},t.prototype.compare_tolerance=function(e,n){return this.cmp_tolerance(e,n)},t.prototype.eq_tolerance=function(e,n){var i=a(e);return t.lte(this.sub(i).abs(),t.max(this.abs(),i.abs()).mul(n))},t.prototype.equals_tolerance=function(e,n){return this.eq_tolerance(e,n)},t.prototype.neq_tolerance=function(e,n){return!this.eq_tolerance(e,n)},t.prototype.notEquals_tolerance=function(e,n){return this.neq_tolerance(e,n)},t.prototype.lt_tolerance=function(e,n){var i=a(e);return!this.eq_tolerance(i,n)&&this.lt(i)},t.prototype.lte_tolerance=function(e,n){var i=a(e);return this.eq_tolerance(i,n)||this.lt(i)},t.prototype.gt_tolerance=function(e,n){var i=a(e);return!this.eq_tolerance(i,n)&&this.gt(i)},t.prototype.gte_tolerance=function(e,n){var i=a(e);return this.eq_tolerance(i,n)||this.gt(i)},t.prototype.log10=function(){return this.e+Math.log10(this.m)},t.prototype.absLog10=function(){return this.e+Math.log10(Math.abs(this.m))},t.prototype.pLog10=function(){return this.m<=0||this.e<0?0:this.log10()},t.prototype.log=function(e){return Math.LN10/Math.log(e)*this.log10()},t.prototype.log2=function(){return 3.321928094887362*this.log10()},t.prototype.ln=function(){return 2.302585092994045*this.log10()},t.prototype.logarithm=function(e){return this.log(e)},t.prototype.pow=function(e){var n,i=e instanceof t?e.toNumber():e,s=this.e*i;if(Number.isSafeInteger(s)&&(n=Math.pow(this.m,i),isFinite(n)&&n!==0))return x(n,s);var d=Math.trunc(s),u=s-d;if(n=Math.pow(10,i*Math.log10(this.m)+u),isFinite(n)&&n!==0)return x(n,d);var c=t.pow10(i*this.absLog10());return this.sign()===-1?Math.abs(i%2)===1?c.neg():Math.abs(i%2)===0?c:new t(Number.NaN):c},t.prototype.pow_base=function(e){return a(e).pow(this)},t.prototype.factorial=function(){var e=this.toNumber()+1;return t.pow(e/Math.E*Math.sqrt(e*Math.sinh(1/e)+1/(810*Math.pow(e,6))),e).mul(Math.sqrt(2*Math.PI/e))},t.prototype.exp=function(){var e=this.toNumber();return-706<e&&e<709?t.fromNumber(Math.exp(e)):t.pow(Math.E,e)},t.prototype.sqr=function(){return x(Math.pow(this.m,2),2*this.e)},t.prototype.sqrt=function(){return this.m<0?new t(Number.NaN):this.e%2!=0?x(3.16227766016838*Math.sqrt(this.m),Math.floor(this.e/2)):x(Math.sqrt(this.m),Math.floor(this.e/2))},t.prototype.cube=function(){return x(Math.pow(this.m,3),3*this.e)},t.prototype.cbrt=function(){var e=1,n=this.m;n<0&&(e=-1,n=-n);var i=e*Math.pow(n,1/3),s=this.e%3;return x(s===1||s===-1?2.154434690031883*i:s!==0?4.641588833612778*i:i,Math.floor(this.e/3))},t.prototype.sinh=function(){return this.exp().sub(this.negate().exp()).div(2)},t.prototype.cosh=function(){return this.exp().add(this.negate().exp()).div(2)},t.prototype.tanh=function(){return this.sinh().div(this.cosh())},t.prototype.asinh=function(){return t.ln(this.add(this.sqr().add(1).sqrt()))},t.prototype.acosh=function(){return t.ln(this.add(this.sqr().sub(1).sqrt()))},t.prototype.atanh=function(){return this.abs().gte(1)?Number.NaN:t.ln(this.add(1).div(new t(1).sub(this)))/2},t.prototype.ascensionPenalty=function(e){return e===0?this:this.pow(Math.pow(10,-e))},t.prototype.egg=function(){return this.add(9)},t.prototype.lessThanOrEqualTo=function(e){return this.cmp(e)<1},t.prototype.lessThan=function(e){return this.cmp(e)<0},t.prototype.greaterThanOrEqualTo=function(e){return this.cmp(e)>-1},t.prototype.greaterThan=function(e){return this.cmp(e)>0},t.prototype.decimalPlaces=function(){return this.dp()},t.prototype.dp=function(){if(!isFinite(this.mantissa))return NaN;if(this.exponent>=17)return 0;for(var e=this.mantissa,n=-this.exponent,i=1;Math.abs(Math.round(e*i)/i-e)>1e-10;)i*=10,n++;return n>0?n:0},Object.defineProperty(t,"MAX_VALUE",{get:function(){return X},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MIN_VALUE",{get:function(){return Q},enumerable:!1,configurable:!0}),Object.defineProperty(t,"NUMBER_MAX_VALUE",{get:function(){return Z},enumerable:!1,configurable:!0}),Object.defineProperty(t,"NUMBER_MIN_VALUE",{get:function(){return ee},enumerable:!1,configurable:!0}),t}(),X=$(1,T),Q=$(1,-T),Z=a(Number.MAX_VALUE),ee=a(Number.MIN_VALUE);const w={autoFry:{name:"AutoFry",img:"Research1-Autofry.png",description:"AI-controlled sausage fryer.",cost:10,duration:30,effectAmount:1,effect:t=>{t.korv+=1,t.korv>t.korvtak&&(t.korv=t.korvtak)},effectInterval:5e3,criteria:t=>t.korv>=10,toggleable:"autoFryActive"},plasticBox:{name:"Plastlåda",img:"Research2-plastlada varmkorv.png",description:"Old laundry-box with several compartments.",cost:100,duration:60,criteria:t=>t.korv>=100,effect:t=>{t.korvtak+=900,t.equipment.plasticBox.unlocked=!0}},fishBox:{name:"Fisklåda",img:"Research3-fisklåda.png",description:"Upgrade the laundry box with a freezing water compartment",cost:750,duration:300,criteria:t=>t.korv>=750,effect:t=>{t.korvtak+=6350,t.equipment.fishBox.unlocked=!0}},condimentsMachine:{name:"Condiments Machine",img:"Research4-Condimentmachine.png",criteria:t=>!1}},U={recipe1:{name:"Recipe for sausage with ketchup and mustard.",description:"Esoteric knowledge concerning ancient sausage techniques. It seems to be over 400 years old.",img:"src/game/Assets/img/recept/recipe-frame-0-.png",cost:750,duration:60},recipe2:{name:"Recipe for sausage with everything on it.",description:"Esoteric knowledge concerning secret sausage techniques. It seems to be over 70 years old.",img:"src/game/Assets/img/recept/recipe-frame-0-.png",cost:1,duration:10}},D={lagerhus:{name:"Lagerhus",img:"",effectDescription:"Storage house for your cold dogs.",itemDescription:"Storage house for your cold dogs",cost:1e3,duration:600,onBuild:t=>{korvtak+=1e3}}},r={korv:0,korvtak:250,research:{},equipment:{plasticBox:{unlocked:!1,equipped:!1},fishBox:{unlocked:!1,equipped:!1},korv1:{unlocked:!1,equipped:!1},korv2:{unlocked:!1,equipped:!1},korv3:{unlocked:!1,equipped:!1},allowedKorvWeapons:[],ketchup:{unlocked:!1,equipped:!1},senap:{unlocked:!1,equipped:!1},bostongurka:{unlocked:!1,equipped:!1},topphatt:{unlocked:!1,equipped:!1},pilgrimshatt:{unlocked:!1,equipped:!1},equippedPrimary:null,equippedSecondary:null},boogie:{maxHP:3,currentHP:3,damageTypes:new Set,attackPower:0,defense:0,statusEffects:[],defeatedEnemies:new Set},skills:{throw:{unlocked:!1,level:1}},recipes:{},buildings:{},autoFryActive:!1};for(const t in w)r.research[t]={unlocked:!1,researching:!1,remainingTime:w[t].duration,completed:!1};for(const t in U)r.recipes[t]={unlocked:!1,crafting:!1,remainingTime:0,completed:!1};for(const t in D)r.buildings[t]={unlocked:!1,constructing:!1,remainingTime:D[t].duration,completed:!1};function te(){r.korv===void 0&&(r.korv=0),r.korv<r.korvtak?(r.korv+=1,H(r.korv)):console.log("Korvtak reached! No more korv can be added.")}function ne(){r.korv===void 0&&(r.korv=0),r.korv<r.korvtak?(r.korv+=10,H(r.korv)):console.log("Korvtak reached! No more korv can be added.")}function ie(){r.korv+=1e3,r.korv>r.korvtak&&(r.korv=r.korvtak)}const B={korv1:{name:"Cooked hot dog",description:"One generic sausage.",img:"src/game/Assets/img/equipment/Korvknappar/korv1.png"},korv2:{name:"Cooked hot dog with ketchup and mustard",description:"This one has taste!",img:"src/game/Assets/img/equipment/Korvknappar/korv2.png"},korv3:{name:"Cooked hot dog with everything",description:"The pinnacle of swedish ingenuity!",img:"src/game/Assets/img/equipment/Korvknappar/korv3.png"},fuskkorv:{name:"The one doG",description:"The Gods use this to test the limits of their Realm.",img:"src/game/Assets/img/equipment/Korvknappar/korv1.png"}};function oe({tabContent:t,mainScreen:e,infoLeft:n,infoRight:i}){const s=document.getElementById("mainscreen-centering");s&&s.remove();const d=document.createElement("div");d.id="mainscreen-centering",d.style.display="flex",d.style.justifyContent="center",d.style.alignItems="flex-start",d.style.height="100%",d.style.width="100%";const u=document.createElement("div");u.id="mainscreen-wrapper",u.style.position="relative",u.style.width="740px",u.style.height="400px";const c=document.createElement("img");c.src=`${KorvkioskData.pluginUrl}src/game/Assets/img/kiosk/korvkioskmainscreen-inprogress.gif`,c.style.display="block",c.style.width="740px",c.style.height="400px",u.appendChild(c);const o=[];r.research.autoFry&&r.research.autoFry.unlocked&&!r.autoFryActive&&o.push(`${KorvkioskData.pluginUrl}src/game/Assets/img/kiosk/autofry.png`),r.autoFryActive&&o.push(`${KorvkioskData.pluginUrl}src/game/Assets/img/kiosk/autofryactive.gif`),o.forEach(m=>{const p=document.createElement("img");p.src=m,p.style.position="absolute",p.style.top="0",p.style.left="0",p.style.width="740px",p.style.height="400px",p.style.pointerEvents="none",u.appendChild(p)}),d.appendChild(u),e.appendChild(d);const l=document.createElement("div");l.id="kiosk-container";for(const m in B){const p=B[m];if(m==="korv1"||m==="fuskkorv"||m==="korv2"&&r.recipes.recipe1?.completed||m==="korv3"&&r.recipes.recipe2?.completed){const h=document.createElement("button");h.type="button",h.className="kiosk-button",h.innerHTML=`
      <img src="${KorvkioskData.pluginUrl}${p.img}" 
           alt="${p.name}" style="width:64px; height:64px;">
    `,m==="korv1"&&h.addEventListener("click",te),m==="korv2"&&h.addEventListener("click",ne),m==="fuskkorv"&&h.addEventListener("click",ie),h.addEventListener("mouseenter",()=>{n&&(n.innerHTML=`
        <div style="text-align: center;">
          <div style="font-size: 20px; font-weight: bold; text-decoration: underline; color: black;">
            ${p.name}
          </div>
          <div style="margin-top: 8px; font-size: 16px;">
            ${p.description}
          </div>
        `)}),h.addEventListener("mouseleave",()=>{n&&(n.innerHTML="")}),l.appendChild(h)}}t.appendChild(l);function f(){if(!i)return;let m=0;for(const p in w){const h=w[p];h.toggleable&&r[h.toggleable]&&h.effectAmount&&h.effectInterval&&(m+=h.effectAmount/(h.effectInterval/1e3))}i.innerHTML=`
      <div style="font-size: 18px; font-weight: bold; margin-bottom: 10px;">Kiosk Stats</div>
      <div>Passive Income: ${m.toFixed(2)} korv/sec</div>
    `}return f(),{updateKioskStats:f}}function re(){for(const t in w){const e=w[t],n=r.research[t];!n.unlocked&&e.criteria(r)&&(n.unlocked=!0,console.log(`${e.name} unlocked!`))}}function K(t){const e=r.research[t],n=w[t],i=setInterval(()=>{e.remainingTime--,e.remainingTime<=0&&(clearInterval(i),e.remainingTime=0,e.researching=!1,e.completed=!0,console.log(`${n.name} research complete!`),!n.toggleable&&typeof n.effect=="function"&&n.effect(r))},1e3)}function se(t){const e=r.research[t],n=w[t];if(!e.researching&&!e.completed){if(r.korv<n.cost){console.log(`Not enough korv to start ${n.name} research!`);return}r.korv-=n.cost,e.researching=!0,e.remainingTime=n.duration,console.log(`${n.name} research started! ${n.cost} korv deducted.`),K(t)}}function ae(){for(const t in r.research){const e=r.research[t];e.researching&&!e.completed&&(K(t),console.log(`Resuming ${w[t].name} research timer...`))}}for(const t in w){const e=w[t];e.effect&&e.effectInterval&&setInterval(()=>{r.research[t].completed&&(e.toggleable&&!r[e.toggleable]||e.effect(r))},e.effectInterval)}function le(){console.log("Cheat: setting all active research timers to 1 second left");for(const t in r.research){const e=r.research[t];e.researching&&!e.completed&&(e.remainingTime=1,console.log(`${t} set to 1 second remaining`))}}function ce({tabContent:t,mainScreen:e,infoLeft:n,infoRight:i}){e.innerHTML=`
    <div style="display:flex; justify-content:center; align-items:center; height:100%;">
      <img src="${KorvkioskData.pluginUrl}src/game/Assets/img/research/researchmainscreen.gif"
           style="max-height:auto; max-width:auto;">
    </div>
  `,t.innerHTML="",n&&(n.innerHTML=""),i&&(i.innerHTML='<div style="font-size:18px; font-weight:bold;">Active Research</div>'),re();const s=document.createElement("div");s.id="research-container";function d(l){const f=r.research[l],m=w[l];if(!f.unlocked)return null;const p=document.createElement("button");p.type="button",p.className="kiosk-button",p.innerHTML=`
      <img src="${KorvkioskData.pluginUrl}src/game/Assets/img/research/${m.img}" 
           alt="${m.name}" 
           style="width:64px; height:64px;">
    `;const h=document.createElement("div");h.style.position="absolute",h.style.bottom="-20px",h.style.width="100%",h.style.textAlign="center",h.style.fontSize="14px",p.style.position="relative",p.appendChild(h);function y(){if(f.researching)p.disabled=!0,p.style.opacity="0.5",h.textContent=`${f.remainingTime}s`,u(l,f.remainingTime);else if(!f.completed)p.disabled=!1,p.style.opacity="0.5",h.textContent=`${m.duration}s`,c(l);else{const g=m.toggleable;p.disabled=!1,g?(p.style.opacity=r[g]?"1":"0.5",h.textContent=r[g]?"ON":"OFF"):(p.style.opacity="0.5",h.textContent="✓"),c(l)}}return p.addEventListener("mouseenter",()=>{n&&(n.innerHTML=`
          <div style="text-align: center;">
            <div style="font-size: 20px; font-weight: bold; text-decoration: underline;">
              ${m.name}
            </div>
            <div style="margin-top: 8px; font-size: 16px;">
              ${m.description||"No description yet."}
            </div>
            <div style="margin-top: 8px; font-size: 14px;">
              Duration: ${m.duration}s
            </div>
          </div>
        `)}),p.addEventListener("mouseleave",()=>{n&&(n.innerHTML="")}),p.addEventListener("click",()=>{!f.researching&&!f.completed?se(l):f.completed&&m.toggleable&&(r[m.toggleable]=!r[m.toggleable]),y()}),setInterval(y,1e3),y(),p}function u(l,f){if(!i)return;let m=document.getElementById(`timer-${l}`);m||(m=document.createElement("div"),m.id=`timer-${l}`,m.style.fontSize="14px",m.style.marginTop="4px",i.appendChild(m));const p=w[l].name||l;m.textContent=`${p}: ${f}s`}function c(l){const f=document.getElementById(`timer-${l}`);f&&f.remove()}for(const l in w){const f=d(l);f&&s.appendChild(f)}const o=document.createElement("button");o.type="button",o.id="finishResearchButton",o.textContent="Finish Research",o.className="kiosk-button",o.style.width="120px",o.style.height="40px",o.style.fontSize="14px",o.addEventListener("click",le),s.appendChild(o),t.appendChild(s)}const q={plasticBox:{name:"Plastlåda",img:"src/game/Assets/img/equipment/korvlador/Korvlada1-plastladavarmkorv.png",effectDescription:"Can cook some basic sausage types.",itemDescription:"An old laundry box repurposed for sausage creation. The boiling water smells like detergent.",slot:"korvBox",toggleable:null,onEquip:t=>{t.equipment.korv1.unlocked||(t.equipment.korv1.unlocked=!0,console.log("Kokt korv med bröd (korv1) unlocked!")),t.equipment.allowedKorvWeapons=["korv1","korv2","korv3"]},onUnequip:null},fishBox:{name:"Fisklåda",img:"src/game/Assets/img/research/Research3-fisklåda.png",effectDescription:"Makes sausages edible by freezing.",itemDescription:"An unlocked freezing compartment in the old laundry box. Who put this there?",slot:"korvBox",toggleable:null,onEquip:t=>{t.equipment.allowedKorvWeapons=["korv1","korv2","korv3"],t.boogie.damageTypes.add("cold")},onUnequip:t=>{t.boogie.damageTypes.delete("cold")}},korv1:{name:"Kokt korv med bröd",img:"src/game/Assets/img/equipment/Korvknappar/korv1.png",slot:"primaryHand",effectDescription:"A basic sausage with nothing on it.",itemDescription:"A lukewarm sausage in mushy bread. No condiments.",toggleable:!0,unlocked:!1,equipped:!1,onEquip:t=>{t.boogie.damageTypes.add("normal"),t.boogie.attackPower+=1},onUnequip:t=>{t.boogie.damageTypes.delete("normal"),t.boogie.attackPower-=1}},korv2:{name:"Kokt korv med bröd, ketchup och senap",img:"src/game/Assets/img/equipment/Primary Hand/primaryhand 2 - kokt korv med bröd,ketchup,senap.png",slot:"primaryHand",effectDescription:"A sausage with ketchup and mustard on it.",itemDescription:"A lukewarm sausage in mushy bread with ketchup and mustard on it.",toggleable:!0,unlocked:!1,equipped:!1,onEquip:t=>{t.boogie.damageTypes.add("normal"),t.boogie.damageTypes.add("heat"),t.boogie.damageTypes.add("pungent"),t.boogie.attackPower+=2},onUnequip:t=>{t.boogie.damageTypes.delete("normal"),t.boogie.damageTypes.delete("heat"),t.boogie.damageTypes.delete("pungent"),t.boogie.attackPower-=2}},korv3:{name:"Kokt korv med allt",img:"src/game/Assets/img/equipment/Primary Hand/primaryhand 3 - kokt korv med bröd alla ingredienser.png",slot:"primaryHand",effectDescription:"A sausage with everything on it.",itemDescription:"A lukewarm sausage in mushy bread with everything on it.",toggleable:!0,unlocked:!1,equipped:!1,onEquip:t=>{t.boogie.damageTypes.add("normal","heat","pungent"),t.boogie.attackPower+=3},onUnequip:t=>{t.boogie.damageTypes.delete("normal","heat","pungent"),t.boogie.attackPower-=3}},ketchup:{name:"Phoenix Ketchup ",img:"src/game/Assets/img/equipment/Secondary hand/Secondary hand 1 - ketchup.png",slot:"secondaryHand",effectDescription:"Adds heat to the sausage.",itemDescription:"The Thin Red Line.",toggleable:!0,onEquip:t=>{t.boogie.damageTypes.add("heat")},onUnequip:t=>{t.boogie.damageTypes.delete("heat")}},senap:{name:"Senap",img:"src/game/Assets/img/equipment/Secondary hand/Secondary hand 2 - senap.png",slot:"secondaryHand",effectDescription:"Adds a pungent taste to the sausage.",itemDescription:"Castle-grade mustard.",toggleable:!0,onEquip:t=>{t.boogie.damageTypes.add("pungent")},onUnequip:t=>{t.boogie.damageTypes.delete("pungent")}},bostongurka:{name:"Phoenix Bostongurka",img:"src/game/Assets/img/equipment/Secondary hand/Secondary hand 3 - bostongurka.png",slot:"secondaryHand",effectDescription:"Adds a revitalizing taste to the sausage.",itemDescription:"Agurken straight outta Boston.",toggleable:!0,onEquip:t=>{},onUnequip:t=>{}},topphatt:{name:"Topphatt",img:"src/game/Assets/img/equipment/Hatt/Hatt 1 - Topphatt.png",slot:"hatt",effectDescription:"Covers your ears somewhat from bullshit.",itemDescription:"The top of the crop of hats. Now we are talking!",toggleable:!0,onEquip:t=>{t.boogie.maxHP+=10,t.boogie.currentHP+=10},onUnequip:t=>{t.boogie.maxHP-=10,t.boogie.currentHP-=10}},pilgrimshatt:{name:"Pilgrimshatt",img:"src/game/Assets/img/equipment/Hatt/Hatt 2 - Pilgrimshatt.png",slot:"hatt",effectDescription:"Shield yourself from bullshit with your own bullshit.",itemDescription:"In pristine condition, almost as if it blesse by some entity.",toggleable:!0,onEquip:t=>{t.boogie.maxHP+=50,t.boogie.currentHP+=50},onUnequip:t=>{t.boogie.maxHP-=50,t.boogie.currentHP-=50}}};let N=null;function ue(t,e,n,i,s){const d=r.equipment[t],u=q[t];if(!d||!d.unlocked)return null;const c=document.createElement("button");c.style.width="64px",c.style.height="64px",c.style.position="relative",c.style.border="none",c.style.padding="0",c.style.cursor="pointer";const o=document.createElement("img");o.src=`${KorvkioskData.pluginUrl}${u.img}`,o.style.width="64px",o.style.height="64px",o.style.display="block",o.style.transition="opacity 0.2s",c.appendChild(o),u.effectDescription&&(c.title=u.effectDescription),c.addEventListener("mouseenter",()=>{i&&(i.innerHTML=`
      <div style="font-size:20px; font-weight:bold; text-decoration:underline;">${u.name}</div>
      <div style="text-align: center;">${u.itemDescription||"No description available"}</div>`)}),c.addEventListener("mouseleave",()=>{i&&(i.innerHTML=`
      <div style="text-align: center;">Hover over an item for information</div>`)});function l(){if(!s)return;const p=r.boogie,h=p.damageTypes&&p.damageTypes.size>0?Array.from(p.damageTypes).join(", "):"None";s.innerHTML=`
    <div style="
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: left;
      height: 100%;
      text-align: left;
    ">
      <div>HP: ${p.currentHP} / ${p.maxHP}</div>
      <div>Attack: ${p.attackPower}</div>
      <div>Defense: ${p.defense}</div>
      <div>Damage Types: ${h}</div>
      <div>Status Effects: ${p.statusEffects.length>0?p.statusEffects.join(", "):"None"}</div>
    </div>
  `}l();function f(){o.style.opacity=d.equipped?"1":"0.4"}function m(){const p=document.querySelector(`#slot-${u.slot} img`);p&&(d.equipped?(p.src=`${KorvkioskData.pluginUrl}${u.img}`,p.style.opacity="1"):(p.src=`${KorvkioskData.pluginUrl}src/game/Assets/img/boogie/duelframe0.png`,p.style.opacity="0.5"))}return f(),m(),c.addEventListener("click",()=>{if(d.equipped){d.equipped=!1,u.onUnequip&&u.onUnequip(r),f(),m(),l();return}for(const p in q){const h=r.equipment[p];if(h&&h.equipped&&q[p].slot===u.slot){h.equipped=!1,q[p].onUnequip&&q[p].onUnequip(r);const y=document.querySelector(`#slot-${q[p].slot} img`);y&&(y.src=`${KorvkioskData.pluginUrl}src/game/Assets/img/boogie/duelframe0.png`,y.style.opacity="0.5")}}d.equipped=!0,t==="korv1"&&!r.skills.throw.unlocked&&(r.skills.throw.unlocked=!0),u.onEquip&&u.onEquip(r),F({tabContent:e,mainScreen:n,infoLeft:i,infoRight:s,categoryOverride:u.slot})}),c}function z(t,e,n,i,s,d){e.innerHTML="";for(const u in q){const c=q[u],o=r.equipment[u];if(!o||!o.unlocked||c.slot!==t)continue;const l=ue(u,n,i,s,d);l&&e.appendChild(l)}}function F({tabContent:t,mainScreen:e,infoLeft:n,infoRight:i,categoryOverride:s=null}){e.innerHTML="",t.innerHTML="",i||(i=document.createElement("div"),i.id="equipment-info-right",i.style.border="1px solid #444",i.style.padding="8px",i.style.minWidth="150px",t.appendChild(i));const d=document.createElement("div");d.style.width="740px",d.style.height="400px",d.style.display="grid",d.style.gridTemplateColumns="repeat(4, 1fr)",d.style.justifyItems="center",d.style.alignItems="center",d.style.gap="20px",d.style.border="solid";const u=document.createElement("div");u.style.width="100%",u.style.height="100%",u.style.display="flex",u.style.justifyContent="center",u.style.alignItems="center",u.appendChild(d),e.appendChild(u);const c=[{name:"Primary Hand",key:"primaryHand"},{name:"Secondary Hand",key:"secondaryHand"},{name:"Hatt",key:"hatt"},{name:"Korvlåda",key:"korvBox"}];c.forEach(f=>{const m=document.createElement("div");m.id=`slot-${f.key}`,m.style.display="flex",m.style.flexDirection="column",m.style.alignItems="center";const p=document.createElement("p");p.textContent=f.name,p.style.margin="0 0 8px 0",p.style.fontWeight="bold",m.appendChild(p);const h=document.createElement("img");h.alt=f.name,h.style.width="64px",h.style.height="64px",h.style.border="2px solid #444",h.style.borderRadius="8px";let y=Object.keys(r.equipment).find(g=>r.equipment[g]?.equipped&&q[g]?.slot===f.key);y?(h.src=`${KorvkioskData.pluginUrl}${q[y].img}`,h.style.opacity="1"):(h.src=`${KorvkioskData.pluginUrl}src/game/Assets/img/boogie/duelframe0.png`,h.style.opacity="0.5"),m.appendChild(h),d.appendChild(m)}),N||(N=c[0].key),s&&(N=s);const o=document.createElement("div");o.style.display="flex",o.style.justifyContent="space-around",o.style.alignItems="flex-start",o.style.height="40px",o.style.marginBottom="8px";const l=document.createElement("div");l.style.display="flex",l.style.flexWrap="wrap",l.style.justifyContent="left",l.style.gap="5px",l.style.marginTop="1px",c.forEach(f=>{const m=document.createElement("button");m.textContent=f.name,m.style.flex="1",m.style.margin="0 5px",m.style.padding="8px",m.style.cursor="pointer",m.style.fontWeight=N===f.key?"bold":"normal",m.addEventListener("click",()=>{N=f.key,z(N,l,t,e,n,i),Array.from(o.children).forEach(p=>p.style.fontWeight="normal"),m.style.fontWeight="bold"}),o.appendChild(m)}),t.appendChild(o),t.appendChild(l),z(N,l,t,e,n,i),n&&(n.innerHTML="Select an item for info")}const L={byråkrat:{name:"Byråkrat",img:"boogie 1 - byråkrat.png",description:"En byråkrat kommer med sitt prat.",unlockCondition:t=>t.equipment.korv1?.unlocked===!0,winCondition:t=>t.boogie.damageTypes.has("normal"),drops:["ketchup","topphatt"],victoryUnlocks:["ärkekrat"]},ärkekrat:{name:"Ärkekrat",img:"boogie 2 -  ärkekrat.png",description:"Han kom gående på gaten.",unlockCondition:t=>t.boogie.defeatedEnemies.has("byråkrat"),winCondition:t=>t.boogie.damageTypes.has("heat")&&t.boogie.damageTypes.has("cold"),drops:["senap","recipe1"],victoryUnlocks:[]},överförmyndare:{name:"Överförmyndare",img:"boogie 3 - överförmyndare.png",description:"A man with a grim hat. He seems to hate the swedish cold weather and he seems to scoff at what swedish people call castles.",unlockCondition:t=>t.boogie.defeatedEnemies.has("ärkekrat"),winCondition:t=>t.boogie.damageTypes.has("cold")&&t.boogie.damageTypes.has("pungent"),drops:["bostongurka","recipe2","pilgrimshatt","lagerhus"],victoryUnlocks:[]}};function j({tabContent:t,mainScreen:e,infoLeft:n,infoRight:i}){t.innerHTML="";const s=document.createElement("div");s.style.display="flex",s.style.flexWrap="wrap",s.style.gap="10px",s.style.justifyContent="flex-start",s.style.alignItems="flex-start",s.style.padding="10px";for(const d in L){const u=L[d];if(!u.unlockCondition(r))continue;const c=document.createElement("button");c.type="button",c.className="kiosk-button",c.innerHTML=`
      <img src="${KorvkioskData.pluginUrl}src/game/Assets/img/boogie/${u.img}" 
           alt="${u.name}" 
           style="width:64px; height:64px;">
    `,c.addEventListener("mouseenter",()=>{n&&(n.innerHTML=`
          <div style="text-align:center;">
            <div style="font-size:20px; font-weight:bold; text-decoration:underline;">
              ${u.name}
            </div>
            <div style="margin-top:8px; font-size:16px;">
              ${u.description}
            </div>
          </div>
        `)}),c.addEventListener("mouseleave",()=>{n&&(n.innerHTML="")}),c.addEventListener("click",()=>{u.winCondition(r)?(console.log(`You defeated ${u.name}!`),r.boogie.defeatedEnemies.add(d),u.drops.forEach(o=>{r.equipment[o]&&!r.equipment[o].unlocked?(r.equipment[o].unlocked=!0,console.log(`${o} unlocked!`)):r.recipes[o]&&!r.recipes[o].unlocked?(r.recipes[o].unlocked=!0,console.log(`${o} recipe unlocked!`)):r.buildings[o]&&!r.buildings[o].unlocked&&(r.buildings[o].unlocked=!0,console.log(`${o} building unlocked!`))}),u.victoryUnlocks&&u.victoryUnlocks.forEach(o=>{const l=L[o];l&&console.log(`New enemy unlocked: ${l.name}`)}),j({tabContent:t,mainScreen:e,infoLeft:n,infoRight:i})):console.log(`You cannot defeat ${u.name} yet. Equip the right damage type.`)}),s.appendChild(c)}t.appendChild(s)}const de={throw:{name:"Throw",img:"Skill 1 - Throw.png",description:"Throw the sausage very hard."}};function pe({tabContent:t,mainScreen:e,infoLeft:n,infoRight:i}){t.innerHTML="",n&&(n.innerHTML=""),i&&(i.innerHTML='<div style="font-size:18px; font-weight:bold;">Unlocked Skills</div>');const s=document.createElement("div");t.appendChild(s);for(const[d,u]of Object.entries(r.skills)){if(!u.unlocked)continue;const c=de[d];if(!c)continue;const o=document.createElement("button");o.type="button",o.className="kiosk-button",o.innerHTML=`
      <img src="${KorvkioskData.pluginUrl}src/game/Assets/img/skills/${c.img}" 
           alt="${c.name}" 
           style="width:64px; height:64px;">
    `,o.addEventListener("mouseenter",()=>{n&&(n.innerHTML=`
          <div style="text-align: center;">
            <div style="font-size: 20px; font-weight: bold; text-decoration: underline;">
              ${c.name}
            </div>
            <div style="margin-top: 8px; font-size: 16px;">
              ${c.description}
            </div>
            <div style="margin-top: 8px;">Level: ${u.level}</div>
          </div>
        `)}),o.addEventListener("mouseleave",()=>{n&&(n.innerHTML="")}),o.addEventListener("click",()=>{console.log(`Used skill: ${c.name}`)}),s.appendChild(o)}if(s.children.length===0){const d=document.createElement("p");d.textContent="No skills unlocked yet!",d.style.textAlign="center",t.appendChild(d)}}function me({tabContent:t,mainScreen:e,infoLeft:n,infoRight:i}){e.innerHTML=`
    <div style="display:flex; justify-content:center; align-items:center; height:100%;">
      <img src="${KorvkioskData.pluginUrl}src/game/Assets/img/recept/recipesmainscreen.png"
           style="max-height:auto; max-width:auto;">
    </div>
  `,t.innerHTML="",n&&(n.innerHTML=""),i&&(i.innerHTML='<div style="font-size:18px; font-weight:bold;">Active Recipes</div>');const s=document.createElement("div");s.id="recipe-container";function d(u){const c=r.recipes[u],o=U[u];if(!c.unlocked)return null;const l=document.createElement("button");l.type="button",l.className="kiosk-button",l.style.position="relative",l.style.margin="5px",l.innerHTML=`
      <img src="${KorvkioskData.pluginUrl}${o.img}" 
           alt="${o.name}" 
           style="width:64px; height:64px;">
    `;const f=document.createElement("div");f.style.position="absolute",f.style.bottom="-20px",f.style.width="100%",f.style.textAlign="center",f.style.fontSize="14px",l.appendChild(f);function m(){c.crafting?(l.disabled=!0,l.style.opacity="0.5",f.textContent=`${c.remainingTime}s`,h(u,c.remainingTime)):c.completed?(l.disabled=!0,l.style.opacity="0.5",f.textContent="✓",y(u)):(l.disabled=!1,l.style.opacity="1",f.textContent=`${o.cost} korv`,y(u))}l.addEventListener("mouseenter",()=>{n&&(n.innerHTML=`
          <div style="text-align: center;">
            <div style="font-size: 20px; font-weight: bold; text-decoration: underline;">
              ${o.name}
            </div>
            <div style="margin-top: 8px; font-size: 16px;">
              ${o.description||"No description yet."}
            </div>
            <div style="margin-top: 8px; font-size: 14px;">
              Cost: ${o.cost} korv<br>
              Duration: ${o.duration}s
            </div>
          </div>
        `)}),l.addEventListener("mouseleave",()=>{n&&(n.innerHTML="")}),l.addEventListener("click",()=>{r.korv>=o.cost&&!c.crafting&&!c.completed&&(r.korv-=o.cost,p(u),m())});function p(g){c.crafting=!0,c.remainingTime=o.duration;const k=setInterval(()=>{c.remainingTime--,m(),c.remainingTime<=0&&(clearInterval(k),c.crafting=!1,c.completed=!0,m(),console.log(`${g} completed!`),g==="recipe1"&&(r.equipment.korv2.unlocked||(r.equipment.korv2.unlocked=!0,console.log("Korv2 unlocked via Recipe 1!")),r.kiosk&&r.kiosk.korv2&&(r.kiosk.korv2.unlocked=!0,console.log("Korv2 kiosk item unlocked!"))))},1e3)}function h(g,k){if(!i)return;let b=document.getElementById(`recipe-timer-${g}`);b||(b=document.createElement("div"),b.id=`recipe-timer-${g}`,b.style.fontSize="14px",b.style.marginTop="4px",i.appendChild(b));const M=o.name||g;b.textContent=`${M}: ${k}s`}function y(g){const k=document.getElementById(`recipe-timer-${g}`);k&&k.remove()}return m(),l}for(const u in U){const c=d(u);c&&s.appendChild(c)}t.appendChild(s)}function fe({tabContent:t,mainScreen:e,infoLeft:n,infoRight:i}){e.innerHTML=`
    <div style="display:flex; justify-content:center; align-items:center; height:100%;">
      <img src="${KorvkioskData.pluginUrl}src/game/Assets/img/buildings/buildingmainscreen.png"
           style="max-height:auto; max-width:auto;">
    </div>
  `,t.innerHTML="",n&&(n.innerHTML=""),i&&(i.innerHTML='<div style="font-size:18px; font-weight:bold;">Active Constructions</div>');const s=document.createElement("div");s.id="building-container";function d(c){const o=r.buildings[c],l=D[c];if(!o.unlocked)return null;o.count===void 0&&(o.count=0);const f=document.createElement("button");f.type="button",f.className="kiosk-button",f.style.position="relative",f.style.margin="5px",f.innerHTML=`
      <img src="${KorvkioskData.pluginUrl}${l.img||"src/game/Assets/img/buildings/default.png"}" 
           alt="${l.name}" 
           style="width:64px; height:64px;">
    `;const m=document.createElement("div");m.style.position="absolute",m.style.bottom="-20px",m.style.width="100%",m.style.textAlign="center",m.style.fontSize="14px",f.appendChild(m);function p(){o.constructing?(f.disabled=!0,f.style.opacity="0.5",m.textContent=`${o.remainingTime}s`,y(c,o.remainingTime)):(f.disabled=!1,f.style.opacity="1",m.textContent=`${l.cost} korv`,g(c))}f.addEventListener("mouseenter",()=>{n&&(n.innerHTML=`
          <div style="text-align:center;">
            <div style="font-size:20px; font-weight:bold; text-decoration:underline;">
              ${l.name}
            </div>
            <div style="margin-top:8px; font-size:16px;">
              ${l.itemDescription||"No description yet."}
            </div>
            <div style="margin-top:8px; font-size:14px;">
              Cost: ${l.cost} korv<br>
              Duration: ${l.duration}s<br>
              Built: ${o.count}
            </div>
          </div>
        `)}),f.addEventListener("mouseleave",()=>{n&&(n.innerHTML="")}),f.addEventListener("click",()=>{r.korv>=l.cost&&!o.constructing&&(r.korv-=l.cost,h(c),p())});function h(k){o.constructing=!0,o.remainingTime=l.duration;const b=setInterval(()=>{o.remainingTime--,p(),o.remainingTime<=0&&(clearInterval(b),o.constructing=!1,o.count++,p(),l.onBuild&&l.onBuild(r),console.log(`${k} constructed! Count: ${o.count}`),u())},1e3)}function y(k,b){if(!i)return;let M=document.getElementById(`building-timer-${k}`);M||(M=document.createElement("div"),M.id=`building-timer-${k}`,M.style.fontSize="14px",M.style.marginTop="4px",i.appendChild(M));const R=l.name||k;M.textContent=`${R}: ${b}s`}function g(k){const b=document.getElementById(`building-timer-${k}`);b&&b.remove()}return p(),f}for(const c in D){const o=d(c);o&&s.appendChild(o)}t.appendChild(s);function u(){const c=Object.values(r.buildings).reduce((o,l)=>o+(l.count||0),0);e.innerHTML=`
      <div style="display:flex; flex-direction:column; justify-content:center; align-items:center; height:100%;">
        <div style="font-size:20px; font-weight:bold;">Buildings Constructed</div>
        <div style="font-size:32px; margin-top:10px;">${c}</div>
      </div>
    `}u()}function he({tabContent:t}){t.innerHTML="";const e=document.createElement("p");e.textContent="Factory tab coming soon!",t.appendChild(e)}function ge({tabContent:t}){t.innerHTML="";const e=document.createElement("p");e.textContent="Artifacts tab coming soon!",t.appendChild(e)}function ye({tabContent:t}){t.innerHTML="";const e=document.createElement("p");e.textContent="spacecenter tab coming soon!",t.appendChild(e)}function ve(t,e){return e instanceof Set?{__type:"Set",values:Array.from(e)}:e}function O(t,e){if(!e||typeof e!="object")return e;if(Array.isArray(e))return e.slice();(!t||typeof t!="object"||Array.isArray(t))&&(t={});for(const n of Object.keys(e)){const i=e[n],s=t[n];if(i&&i.__type==="Set"&&Array.isArray(i.values)){t[n]=new Set(i.values);continue}if(i&&typeof i=="object"&&!Array.isArray(i)){t[n]=O(s,i);continue}t[n]=Array.isArray(i)?i.slice():i}return t}function ke(){try{const t=JSON.stringify(r,ve,2),e="data:text/json;charset=utf-8,"+encodeURIComponent(t),n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download","korvkiosk_save.json"),n.click()}catch(t){console.error("Failed to export save:",t)}}function be(t){const e=new FileReader;e.onload=n=>{try{const i=JSON.parse(n.target.result);O(r,i),r.boogie&&(Array.isArray(r.boogie.damageTypes)?r.boogie.damageTypes=new Set(r.boogie.damageTypes):r.boogie.damageTypes&&r.boogie.damageTypes.__type==="Set"?r.boogie.damageTypes=new Set(r.boogie.damageTypes.values||[]):r.boogie.damageTypes instanceof Set||(r.boogie.damageTypes=new Set)),r.korv!==void 0&&H(r.korv),ae(),console.log("Save loaded and merged into current state:",r)}catch(i){console.error("Invalid save file",i)}},e.readAsText(t)}function xe({tabContent:t}){const e=document.createElement("div");e.id="settings-container";const n=document.createElement("button");n.textContent="Export Save",n.onclick=ke;const i=document.createElement("label");i.textContent="Import Save: ",i.style.display="block",i.style.marginTop="10px";const s=document.createElement("input");s.type="file",s.accept="application/json",s.onchange=d=>{const u=d.target.files[0];u&&be(u)},i.appendChild(s),e.appendChild(n),e.appendChild(i),t.appendChild(e)}const S=[{id:"kiosk",name:"Kiosk",render:oe,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/kiosk/kiosk frame 0.png`},{id:"research",name:"Research",render:ce,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/research/beaker-frame-0.png`},{id:"equipment",name:"Equipment",render:F,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/equipment/equipment frame 0.png`},{id:"boogie",name:"Boogie",render:j,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/boogie/duelframe0.png`},{id:"skills",name:"Skills",render:pe,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/Skills/Skill 1 - Throw.png`},{id:"recipes",name:"Recipes",render:me,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/recept/recipe-frame-0-.png`},{id:"buildings",name:"Buildings",render:fe,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/building/building upgrade frame 0.png`},{id:"factory",name:"Factory",render:he,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/fabrik/fabrik frame 0.png`},{id:"artifacts",name:"Artifacts",render:ge,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/artifacts/artifacts frame 0.png`},{id:"spacecenter",name:"Spacecenter",render:ye,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/spacecenter/spacecenter frame 0.png`},{id:"settings",name:"Settings",render:xe,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/inställningar/settings frame 0.png`}];let v,E;function we(){document.body.style.display="flex",document.body.style.justifyContent="center",document.body.style.alignItems="center",document.body.style.height="100vh",document.body.style.margin="0",document.body.style.background="#eee";const t=document.createElement("div");t.id="game-ui",t.style.width="1200px",t.style.height="600px",t.style.border="2px solid #444",t.style.display="flex",t.style.flexDirection="column",t.style.background="#f0f0f0",t.style.position="relative",v=document.createElement("div"),v.id="korv-counter",v.textContent="Korv: 0",v.style.position="absolute",v.style.top="10px",v.style.right="10px",v.style.color="#D2B04C",v.style.fontWeight="bold",v.style.fontSize="20px",v.style.fontFamily="monospace, sans-serif",v.style.userSelect="none",v.style.pointerEvents="none";const e=document.createElement("div");e.style.width="1200px",e.style.height="400px",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e.style.background="#000",e.style.position="relative";const n=document.createElement("div");n.id="info-left",n.style.width="230px",n.style.height="100%",n.style.background="#e5e5e5",n.style.padding="10px",n.style.boxSizing="border-box",n.style.overflowY="auto",n.style.fontFamily="Arial, sans-serif",n.style.fontSize="20px",n.style.color="black",n.style.fontWeight="bold",n.style.display="flex",n.style.flexDirection="column",n.style.justifyContent="center",n.style.alignItems="center";const i=document.createElement("div");i.className="main-screen",i.style.width="740px",i.style.height="100%",i.style.background="#e5e5e5",i.style.display="flex",i.style.justifyContent="center",i.style.alignItems="center",i.style.overflow="hidden";const s=document.createElement("div");s.id="info-right",s.style.width="230px",s.style.height="100%",s.style.background="#e5e5e5",s.style.color="#c41313ff",s.style.padding="10px",s.style.boxSizing="border-box",s.style.overflowY="auto",s.style.fontFamily="Arial, sans-serif",s.style.fontSize="20px",s.style.color="black",s.style.fontWeight="bold",s.style.display="flex",s.style.flexDirection="column",s.style.justifyContent="center",s.style.alignItems="center",e.appendChild(n),e.appendChild(i),e.appendChild(s),E=document.createElement("div"),E.className="tab-buttons",E.style.height="50px",E.style.flexShrink="0",E.style.display="flex",E.style.justifyContent="flex-start",E.style.alignItems="center",E.style.background="#ddd",E.style.borderBottom="2px solid #999";const d=document.createElement("div");d.className="tab-content",d.style.flexGrow="1",d.style.padding="10px",d.style.overflow="auto",d.style.background="#fafafa",t.appendChild(e),t.appendChild(E),t.appendChild(d),t.appendChild(v),document.body.appendChild(t),S.filter(o=>o.unlocked).forEach(o=>{const l=document.createElement("button");l.id=`btn-${o.id}`,l.style.padding="0px 10px",l.style.fontSize="16px",l.style.cursor="pointer",l.innerHTML=`
      <img src="${o.icon}" alt="${o.name}" style="width:32px; height:32px; vertical-align:middle; margin-right:5px;">
      ${o.name}
    `,l.onclick=()=>u(o.id),E.appendChild(l)});function u(o){const l=S.find(f=>f.id===o);l&&(d.innerHTML="",i.innerHTML="",n.innerHTML="",s.innerHTML="",l.render({tabContent:d,mainScreen:i,infoLeft:n,infoRight:s})),c(o)}function c(o){S.forEach(l=>{const f=document.getElementById(`btn-${l.id}`);f&&f.classList.toggle("active",l.id===o)})}u(S[0].id)}setInterval(()=>{H(r.korv)},1e3);function H(){v&&(v.textContent=`Korv: ${r.korv} / ${r.korvtak}`)}function Ee(){we()}document.addEventListener("DOMContentLoaded",()=>{Ee()});
