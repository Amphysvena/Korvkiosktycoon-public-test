function _(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var N,E;function T(){return E||(E=1,N=function(e,t,n){if(e==null||t==null)return e;var r=String(e),o=typeof t=="number"?t:parseInt(t,10);if(isNaN(o)||!isFinite(o))return r;var s=r.length;if(s>=o)return r;var a=n==null?"":String(n);a===""&&(a=" ");for(var c=o-s;a.length<c;)a+=a;var d=a.length>c?a.substr(0,c):a;return r+d}),N}var I=T();const M=_(I);var f=9e15,v=function(){for(var e=[],t=-323;t<=308;t++)e.push(+("1e"+t));return function(n){return e[n+323]}}(),i=function(e){return e instanceof b?e:new b(e)},p=function(e,t){return new b().fromMantissaExponent(e,t)},y=function(e,t){return new b().fromMantissaExponent_noNormalize(e,t)};function C(e,t,n,r){var o=t.mul(n.pow(r));return b.floor(e.div(o).mul(n.sub(1)).add(1).log10()/n.log10())}function S(e,t,n,r){return t.mul(n.pow(r)).mul(b.sub(1,n.pow(e))).div(b.sub(1,n))}var b=function(){function e(t){this.mantissa=NaN,this.exponent=NaN,t===void 0?(this.m=0,this.e=0):t instanceof e?this.fromDecimal(t):typeof t=="number"?this.fromNumber(t):this.fromString(t)}return Object.defineProperty(e.prototype,"m",{get:function(){return this.mantissa},set:function(t){this.mantissa=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"e",{get:function(){return this.exponent},set:function(t){this.exponent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"s",{get:function(){return this.sign()},set:function(t){if(t===0)return this.e=0,void(this.m=0);this.sgn()!==t&&(this.m=-this.m)},enumerable:!1,configurable:!0}),e.fromMantissaExponent=function(t,n){return new e().fromMantissaExponent(t,n)},e.fromMantissaExponent_noNormalize=function(t,n){return new e().fromMantissaExponent_noNormalize(t,n)},e.fromDecimal=function(t){return new e().fromDecimal(t)},e.fromNumber=function(t){return new e().fromNumber(t)},e.fromString=function(t){return new e().fromString(t)},e.fromValue=function(t){return new e().fromValue(t)},e.fromValue_noAlloc=function(t){return t instanceof e?t:new e(t)},e.abs=function(t){return i(t).abs()},e.neg=function(t){return i(t).neg()},e.negate=function(t){return i(t).neg()},e.negated=function(t){return i(t).neg()},e.sign=function(t){return i(t).sign()},e.sgn=function(t){return i(t).sign()},e.round=function(t){return i(t).round()},e.floor=function(t){return i(t).floor()},e.ceil=function(t){return i(t).ceil()},e.trunc=function(t){return i(t).trunc()},e.add=function(t,n){return i(t).add(n)},e.plus=function(t,n){return i(t).add(n)},e.sub=function(t,n){return i(t).sub(n)},e.subtract=function(t,n){return i(t).sub(n)},e.minus=function(t,n){return i(t).sub(n)},e.mul=function(t,n){return i(t).mul(n)},e.multiply=function(t,n){return i(t).mul(n)},e.times=function(t,n){return i(t).mul(n)},e.div=function(t,n){return i(t).div(n)},e.divide=function(t,n){return i(t).div(n)},e.recip=function(t){return i(t).recip()},e.reciprocal=function(t){return i(t).recip()},e.reciprocate=function(t){return i(t).reciprocate()},e.cmp=function(t,n){return i(t).cmp(n)},e.compare=function(t,n){return i(t).cmp(n)},e.eq=function(t,n){return i(t).eq(n)},e.equals=function(t,n){return i(t).eq(n)},e.neq=function(t,n){return i(t).neq(n)},e.notEquals=function(t,n){return i(t).notEquals(n)},e.lt=function(t,n){return i(t).lt(n)},e.lte=function(t,n){return i(t).lte(n)},e.gt=function(t,n){return i(t).gt(n)},e.gte=function(t,n){return i(t).gte(n)},e.max=function(t,n){return i(t).max(n)},e.min=function(t,n){return i(t).min(n)},e.clamp=function(t,n,r){return i(t).clamp(n,r)},e.clampMin=function(t,n){return i(t).clampMin(n)},e.clampMax=function(t,n){return i(t).clampMax(n)},e.cmp_tolerance=function(t,n,r){return i(t).cmp_tolerance(n,r)},e.compare_tolerance=function(t,n,r){return i(t).cmp_tolerance(n,r)},e.eq_tolerance=function(t,n,r){return i(t).eq_tolerance(n,r)},e.equals_tolerance=function(t,n,r){return i(t).eq_tolerance(n,r)},e.neq_tolerance=function(t,n,r){return i(t).neq_tolerance(n,r)},e.notEquals_tolerance=function(t,n,r){return i(t).notEquals_tolerance(n,r)},e.lt_tolerance=function(t,n,r){return i(t).lt_tolerance(n,r)},e.lte_tolerance=function(t,n,r){return i(t).lte_tolerance(n,r)},e.gt_tolerance=function(t,n,r){return i(t).gt_tolerance(n,r)},e.gte_tolerance=function(t,n,r){return i(t).gte_tolerance(n,r)},e.log10=function(t){return i(t).log10()},e.absLog10=function(t){return i(t).absLog10()},e.pLog10=function(t){return i(t).pLog10()},e.log=function(t,n){return i(t).log(n)},e.log2=function(t){return i(t).log2()},e.ln=function(t){return i(t).ln()},e.logarithm=function(t,n){return i(t).logarithm(n)},e.pow10=function(t){return Number.isInteger(t)?y(1,t):p(Math.pow(10,t%1),Math.trunc(t))},e.pow=function(t,n){return typeof t=="number"&&t===10&&typeof n=="number"&&Number.isInteger(n)?y(1,n):i(t).pow(n)},e.exp=function(t){return i(t).exp()},e.sqr=function(t){return i(t).sqr()},e.sqrt=function(t){return i(t).sqrt()},e.cube=function(t){return i(t).cube()},e.cbrt=function(t){return i(t).cbrt()},e.dp=function(t){return i(t).dp()},e.decimalPlaces=function(t){return i(t).dp()},e.affordGeometricSeries=function(t,n,r,o){return C(i(t),i(n),i(r),o)},e.sumGeometricSeries=function(t,n,r,o){return S(t,i(n),i(r),o)},e.affordArithmeticSeries=function(t,n,r,o){return function(s,a,c,d){var g=a.add(d.mul(c)).sub(c.div(2)),q=g.pow(2);return g.neg().add(q.add(c.mul(s).mul(2)).sqrt()).div(c).floor()}(i(t),i(n),i(r),i(o))},e.sumArithmeticSeries=function(t,n,r,o){return function(s,a,c,d){var g=a.add(d.mul(c));return s.div(2).mul(g.mul(2).plus(s.sub(1).mul(c)))}(i(t),i(n),i(r),i(o))},e.efficiencyOfPurchase=function(t,n,r){return function(o,s,a){return o.div(s).add(o.div(a))}(i(t),i(n),i(r))},e.randomDecimalForTesting=function(t){if(20*Math.random()<1)return y(0,0);var n=10*Math.random();10*Math.random()<1&&(n=Math.round(n)),n*=Math.sign(2*Math.random()-1);var r=Math.floor(Math.random()*t*2)-t;return p(n,r)},e.prototype.normalize=function(){if(this.m>=1&&this.m<10)return this;if(this.m===0)return this.m=0,this.e=0,this;var t=Math.floor(Math.log10(Math.abs(this.m)));return this.m=t===-324?10*this.m/1e-323:this.m/v(t),this.e+=t,this},e.prototype.fromMantissaExponent=function(t,n){return isFinite(t)&&isFinite(n)?(this.m=t,this.e=n,this.normalize(),this):(t=Number.NaN,n=Number.NaN,this)},e.prototype.fromMantissaExponent_noNormalize=function(t,n){return this.m=t,this.e=n,this},e.prototype.fromDecimal=function(t){return this.m=t.m,this.e=t.e,this},e.prototype.fromNumber=function(t){return isNaN(t)?(this.m=Number.NaN,this.e=Number.NaN):t===Number.POSITIVE_INFINITY?(this.m=1,this.e=f):t===Number.NEGATIVE_INFINITY?(this.m=-1,this.e=f):t===0?(this.m=0,this.e=0):(this.e=Math.floor(Math.log10(Math.abs(t))),this.m=this.e===-324?10*t/1e-323:t/v(this.e),this.normalize()),this},e.prototype.fromString=function(t){if(t.indexOf("e")!==-1){var n=t.split("e");this.m=parseFloat(n[0]),this.e=parseFloat(n[1]),this.normalize()}else if(t==="NaN")this.m=Number.NaN,this.e=Number.NaN;else if(this.fromNumber(parseFloat(t)),isNaN(this.m))throw Error("[DecimalError] Invalid argument: "+t);return this},e.prototype.fromValue=function(t){return t instanceof e?this.fromDecimal(t):typeof t=="number"?this.fromNumber(t):typeof t=="string"?this.fromString(t):(this.m=0,this.e=0,this)},e.prototype.toNumber=function(){if(!isFinite(this.e))return Number.NaN;if(this.e>308)return this.m>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;if(this.e<-324)return 0;if(this.e===-324)return this.m>0?5e-324:-5e-324;var t=this.m*v(this.e);if(!isFinite(t)||this.e<0)return t;var n=Math.round(t);return Math.abs(n-t)<1e-10?n:t},e.prototype.mantissaWithDecimalPlaces=function(t){if(isNaN(this.m)||isNaN(this.e))return Number.NaN;if(this.m===0)return 0;var n=t+1,r=Math.ceil(Math.log10(Math.abs(this.m))),o=Math.round(this.m*Math.pow(10,n-r))*Math.pow(10,r-n);return parseFloat(o.toFixed(Math.max(n-r,0)))},e.prototype.toString=function(){return isNaN(this.m)||isNaN(this.e)?"NaN":this.e>=f?this.m>0?"Infinity":"-Infinity":this.e<=-f||this.m===0?"0":this.e<21&&this.e>-7?this.toNumber().toString():this.m+"e"+(this.e>=0?"+":"")+this.e},e.prototype.toExponential=function(t){if(isNaN(this.m)||isNaN(this.e))return"NaN";if(this.e>=f)return this.m>0?"Infinity":"-Infinity";if(this.e<=-f||this.m===0)return"0"+(t>0?M(".",t+1,"0"):"")+"e+0";if(this.e>-324&&this.e<308)return this.toNumber().toExponential(t);isFinite(t)||(t=17);var n=t+1,r=Math.max(1,Math.ceil(Math.log10(Math.abs(this.m))));return(Math.round(this.m*Math.pow(10,n-r))*Math.pow(10,r-n)).toFixed(Math.max(n-r,0))+"e"+(this.e>=0?"+":"")+this.e},e.prototype.toFixed=function(t){return isNaN(this.m)||isNaN(this.e)?"NaN":this.e>=f?this.m>0?"Infinity":"-Infinity":this.e<=-f||this.m===0?"0"+(t>0?M(".",t+1,"0"):""):this.e>=17?this.m.toString().replace(".","").padEnd(this.e+1,"0")+(t>0?M(".",t+1,"0"):""):this.toNumber().toFixed(t)},e.prototype.toPrecision=function(t){return this.e<=-7?this.toExponential(t-1):t>this.e?this.toFixed(t-this.e-1):this.toExponential(t-1)},e.prototype.valueOf=function(){return this.toString()},e.prototype.toJSON=function(){return this.toString()},e.prototype.toStringWithDecimalPlaces=function(t){return this.toExponential(t)},e.prototype.abs=function(){return y(Math.abs(this.m),this.e)},e.prototype.neg=function(){return y(-this.m,this.e)},e.prototype.negate=function(){return this.neg()},e.prototype.negated=function(){return this.neg()},e.prototype.sign=function(){return Math.sign(this.m)},e.prototype.sgn=function(){return this.sign()},e.prototype.round=function(){return this.e<-1?new e(0):this.e<17?new e(Math.round(this.toNumber())):this},e.prototype.floor=function(){return this.e<-1?Math.sign(this.m)>=0?new e(0):new e(-1):this.e<17?new e(Math.floor(this.toNumber())):this},e.prototype.ceil=function(){return this.e<-1?Math.sign(this.m)>0?new e(1):new e(0):this.e<17?new e(Math.ceil(this.toNumber())):this},e.prototype.trunc=function(){return this.e<0?new e(0):this.e<17?new e(Math.trunc(this.toNumber())):this},e.prototype.add=function(t){var n,r,o=i(t);if(this.m===0)return o;if(o.m===0)return this;if(this.e>=o.e?(n=this,r=o):(n=o,r=this),n.e-r.e>17)return n;var s=Math.round(1e14*n.m+1e14*r.m*v(r.e-n.e));return p(s,n.e-14)},e.prototype.plus=function(t){return this.add(t)},e.prototype.sub=function(t){return this.add(i(t).neg())},e.prototype.subtract=function(t){return this.sub(t)},e.prototype.minus=function(t){return this.sub(t)},e.prototype.mul=function(t){if(typeof t=="number")return t<1e307&&t>-1e307?p(this.m*t,this.e):p(1e-307*this.m*t,this.e+307);var n=typeof t=="string"?new e(t):t;return p(this.m*n.m,this.e+n.e)},e.prototype.multiply=function(t){return this.mul(t)},e.prototype.times=function(t){return this.mul(t)},e.prototype.div=function(t){return this.mul(i(t).recip())},e.prototype.divide=function(t){return this.div(t)},e.prototype.divideBy=function(t){return this.div(t)},e.prototype.dividedBy=function(t){return this.div(t)},e.prototype.recip=function(){return p(1/this.m,-this.e)},e.prototype.reciprocal=function(){return this.recip()},e.prototype.reciprocate=function(){return this.recip()},e.prototype.cmp=function(t){var n=i(t);if(this.m===0){if(n.m===0)return 0;if(n.m<0)return 1;if(n.m>0)return-1}if(n.m===0){if(this.m<0)return-1;if(this.m>0)return 1}if(this.m>0)return n.m<0||this.e>n.e?1:this.e<n.e?-1:this.m>n.m?1:this.m<n.m?-1:0;if(this.m<0)return n.m>0||this.e>n.e?-1:this.e<n.e||this.m>n.m?1:this.m<n.m?-1:0;throw Error("Unreachable code")},e.prototype.compare=function(t){return this.cmp(t)},e.prototype.eq=function(t){var n=i(t);return this.e===n.e&&this.m===n.m},e.prototype.equals=function(t){return this.eq(t)},e.prototype.neq=function(t){return!this.eq(t)},e.prototype.notEquals=function(t){return this.neq(t)},e.prototype.lt=function(t){var n=i(t);return this.m===0?n.m>0:n.m===0?this.m<=0:this.e===n.e?this.m<n.m:this.m>0?n.m>0&&this.e<n.e:n.m>0||this.e>n.e},e.prototype.lte=function(t){return!this.gt(t)},e.prototype.gt=function(t){var n=i(t);return this.m===0?n.m<0:n.m===0?this.m>0:this.e===n.e?this.m>n.m:this.m>0?n.m<0||this.e>n.e:n.m<0&&this.e<n.e},e.prototype.gte=function(t){return!this.lt(t)},e.prototype.max=function(t){var n=i(t);return this.lt(n)?n:this},e.prototype.min=function(t){var n=i(t);return this.gt(n)?n:this},e.prototype.clamp=function(t,n){return this.max(t).min(n)},e.prototype.clampMin=function(t){return this.max(t)},e.prototype.clampMax=function(t){return this.min(t)},e.prototype.cmp_tolerance=function(t,n){var r=i(t);return this.eq_tolerance(r,n)?0:this.cmp(r)},e.prototype.compare_tolerance=function(t,n){return this.cmp_tolerance(t,n)},e.prototype.eq_tolerance=function(t,n){var r=i(t);return e.lte(this.sub(r).abs(),e.max(this.abs(),r.abs()).mul(n))},e.prototype.equals_tolerance=function(t,n){return this.eq_tolerance(t,n)},e.prototype.neq_tolerance=function(t,n){return!this.eq_tolerance(t,n)},e.prototype.notEquals_tolerance=function(t,n){return this.neq_tolerance(t,n)},e.prototype.lt_tolerance=function(t,n){var r=i(t);return!this.eq_tolerance(r,n)&&this.lt(r)},e.prototype.lte_tolerance=function(t,n){var r=i(t);return this.eq_tolerance(r,n)||this.lt(r)},e.prototype.gt_tolerance=function(t,n){var r=i(t);return!this.eq_tolerance(r,n)&&this.gt(r)},e.prototype.gte_tolerance=function(t,n){var r=i(t);return this.eq_tolerance(r,n)||this.gt(r)},e.prototype.log10=function(){return this.e+Math.log10(this.m)},e.prototype.absLog10=function(){return this.e+Math.log10(Math.abs(this.m))},e.prototype.pLog10=function(){return this.m<=0||this.e<0?0:this.log10()},e.prototype.log=function(t){return Math.LN10/Math.log(t)*this.log10()},e.prototype.log2=function(){return 3.321928094887362*this.log10()},e.prototype.ln=function(){return 2.302585092994045*this.log10()},e.prototype.logarithm=function(t){return this.log(t)},e.prototype.pow=function(t){var n,r=t instanceof e?t.toNumber():t,o=this.e*r;if(Number.isSafeInteger(o)&&(n=Math.pow(this.m,r),isFinite(n)&&n!==0))return p(n,o);var s=Math.trunc(o),a=o-s;if(n=Math.pow(10,r*Math.log10(this.m)+a),isFinite(n)&&n!==0)return p(n,s);var c=e.pow10(r*this.absLog10());return this.sign()===-1?Math.abs(r%2)===1?c.neg():Math.abs(r%2)===0?c:new e(Number.NaN):c},e.prototype.pow_base=function(t){return i(t).pow(this)},e.prototype.factorial=function(){var t=this.toNumber()+1;return e.pow(t/Math.E*Math.sqrt(t*Math.sinh(1/t)+1/(810*Math.pow(t,6))),t).mul(Math.sqrt(2*Math.PI/t))},e.prototype.exp=function(){var t=this.toNumber();return-706<t&&t<709?e.fromNumber(Math.exp(t)):e.pow(Math.E,t)},e.prototype.sqr=function(){return p(Math.pow(this.m,2),2*this.e)},e.prototype.sqrt=function(){return this.m<0?new e(Number.NaN):this.e%2!=0?p(3.16227766016838*Math.sqrt(this.m),Math.floor(this.e/2)):p(Math.sqrt(this.m),Math.floor(this.e/2))},e.prototype.cube=function(){return p(Math.pow(this.m,3),3*this.e)},e.prototype.cbrt=function(){var t=1,n=this.m;n<0&&(t=-1,n=-n);var r=t*Math.pow(n,1/3),o=this.e%3;return p(o===1||o===-1?2.154434690031883*r:o!==0?4.641588833612778*r:r,Math.floor(this.e/3))},e.prototype.sinh=function(){return this.exp().sub(this.negate().exp()).div(2)},e.prototype.cosh=function(){return this.exp().add(this.negate().exp()).div(2)},e.prototype.tanh=function(){return this.sinh().div(this.cosh())},e.prototype.asinh=function(){return e.ln(this.add(this.sqr().add(1).sqrt()))},e.prototype.acosh=function(){return e.ln(this.add(this.sqr().sub(1).sqrt()))},e.prototype.atanh=function(){return this.abs().gte(1)?Number.NaN:e.ln(this.add(1).div(new e(1).sub(this)))/2},e.prototype.ascensionPenalty=function(t){return t===0?this:this.pow(Math.pow(10,-t))},e.prototype.egg=function(){return this.add(9)},e.prototype.lessThanOrEqualTo=function(t){return this.cmp(t)<1},e.prototype.lessThan=function(t){return this.cmp(t)<0},e.prototype.greaterThanOrEqualTo=function(t){return this.cmp(t)>-1},e.prototype.greaterThan=function(t){return this.cmp(t)>0},e.prototype.decimalPlaces=function(){return this.dp()},e.prototype.dp=function(){if(!isFinite(this.mantissa))return NaN;if(this.exponent>=17)return 0;for(var t=this.mantissa,n=-this.exponent,r=1;Math.abs(Math.round(t*r)/r-t)>1e-10;)r*=10,n++;return n>0?n:0},Object.defineProperty(e,"MAX_VALUE",{get:function(){return A},enumerable:!1,configurable:!0}),Object.defineProperty(e,"MIN_VALUE",{get:function(){return F},enumerable:!1,configurable:!0}),Object.defineProperty(e,"NUMBER_MAX_VALUE",{get:function(){return D},enumerable:!1,configurable:!0}),Object.defineProperty(e,"NUMBER_MIN_VALUE",{get:function(){return L},enumerable:!1,configurable:!0}),e}(),A=y(1,f),F=y(1,-f),D=i(Number.MAX_VALUE),L=i(Number.MIN_VALUE);const m={autoFry:{name:"autoFry",img:"Research1-Autofry.png",cost:10,duration:30,effect:e=>{e.korv+=1,e.korv>e.korvtak&&(e.korv=e.korvtak)},effectInterval:5e3,criteria:e=>e.korv>=10,toggleable:"autoFryActive"},plasticBox:{name:"plastlåda",img:"Research2-plastlada varmkorv.png",cost:100,duration:60,criteria:e=>e.korv>=100,effect:e=>{e.korvtak+=900,e.equipment.plasticBox.unlocked=!0}},fishBox:{name:"fisklåda",criteria:e=>e.korv>=750},condimentsMachine:{name:"condiments machine",criteria:e=>!1}},u={korv:0,korvtak:250,research:{autoFry:{unlocked:!1,researching:!1,remainingTime:0,completed:!1}},equipment:{plasticBox:{unlocked:!1,equipped:!1}},autoFryActive:!1};for(const e in m)u.research[e]={unlocked:!1,researching:!1,remainingTime:m[e].duration,completed:!1};function $(){u.korv===void 0&&(u.korv=0),u.korv<u.korvtak?(u.korv+=1,console.log(`Korv: ${u.korv}`),x(u.korv)):console.log("Korvtak reached! No more korv can be added.")}function K(){u.korv+=1e3,u.korv>u.korvtak&&(u.korv=u.korvtak)}function P({tabContent:e}){const t=document.getElementById("kiosk-container");t&&t.remove();const n=document.createElement("div");n.id="kiosk-container";const r=document.createElement("button");r.type="button",r.id="koktKorvbutton",r.innerHTML=`
    <img src="${KorvkioskData.pluginUrl}src/game/Assets/img/equipment/Korvknappar/korv1.png" 
         alt="Korv" style="width: 64px; height: 64px;">
  `,r.addEventListener("click",$),n.appendChild(r),e.appendChild(n);const o=document.createElement("button");o.type="button",o.id="koktKorvCheatButton",o.style.width="64px",o.style.height="64px",o.style.position="relative",o.style.border="none",o.style.padding="0",o.style.cursor="pointer";const s=document.createElement("img");s.src=`${KorvkioskData.pluginUrl}src/game/Assets/img/equipment/Korvknappar/korv1.png`,s.style.width="64px",s.style.height="64px",s.style.display="block",o.appendChild(s);const a=document.createElement("div");a.textContent="+1000",a.style.textAlign="center",a.style.fontSize="14px",o.appendChild(a),o.addEventListener("click",K),n.appendChild(o)}function B(){for(const e in m){const t=m[e],n=u.research[e];!n.unlocked&&t.criteria(u)&&(n.unlocked=!0,console.log(`${t.name} unlocked!`))}}function w(e){const t=u.research[e],n=m[e],r=setInterval(()=>{t.remainingTime--,t.remainingTime<=0&&(clearInterval(r),t.remainingTime=0,t.researching=!1,t.completed=!0,console.log(`${n.name} research complete!`),typeof n.effect=="function"&&n.effect(u))},1e3)}function U(e){const t=u.research[e],n=m[e];if(!t.researching&&!t.completed){if(u.korv<n.cost){console.log(`Not enough korv to start ${n.name} research!`);return}u.korv-=n.cost,t.researching=!0,t.remainingTime=n.duration,console.log(`${n.name} research started! ${n.cost} korv deducted.`),w(e)}}function O(){for(const e in u.research){const t=u.research[e];t.researching&&!t.completed&&(w(e),console.log(`Resuming ${m[e].name} research timer...`))}}for(const e in m){const t=m[e];t.effect&&t.effectInterval&&setInterval(()=>{u.research[e].completed&&t.effect(u)},t.effectInterval)}function R({tabContent:e}){e.innerHTML="",B();function t(n){const r=u.research[n],o=m[n];if(!r.unlocked)return null;const s=document.createElement("button");s.style.width="64px",s.style.height="64px",s.style.position="relative",s.style.border="none",s.style.padding="0",s.style.cursor="pointer";const a=document.createElement("img");a.src=`${KorvkioskData.pluginUrl}src/game/Assets/img/research/${o.img}`,a.style.width="64px",a.style.height="64px",a.style.display="block",s.appendChild(a);const c=document.createElement("div");c.style.position="absolute",c.style.bottom="-20px",c.style.width="100%",c.style.textAlign="center",c.style.fontSize="14px",s.appendChild(c);function d(){if(r.researching)s.disabled=!0,a.style.opacity="0.5",c.textContent=`${r.remainingTime}s`;else if(!r.completed)s.disabled=!1,a.style.opacity="0.5",c.textContent=`${o.duration}s`;else{const g=o.toggleable;s.disabled=!1,g?(a.style.opacity=u[g]?"1":"0.5",c.textContent=u[g]?"ON":"OFF"):(a.style.opacity="0.5",c.textContent="✓")}}return s.addEventListener("click",()=>{!r.researching&&!r.completed?U(n):r.completed&&o.toggleable&&(u[o.toggleable]=!u[o.toggleable]),d()}),setInterval(d,1e3),d(),s}for(const n in m){const r=t(n);r&&e.appendChild(r)}}function j({tabContent:e}){e.innerHTML="";const t=document.createElement("p");t.textContent="Equipment tab coming soon!",e.appendChild(t)}function V({tabContent:e}){e.innerHTML="";const t=document.createElement("p");t.textContent="Boogie tab coming soon!",e.appendChild(t)}function H({tabContent:e}){e.innerHTML="";const t=document.createElement("p");t.textContent="Skills tab coming soon!",e.appendChild(t)}function z({tabContent:e}){e.innerHTML="";const t=document.createElement("p");t.textContent="Recipes tab coming soon!",e.appendChild(t)}function G({tabContent:e}){e.innerHTML="";const t=document.createElement("p");t.textContent="Buildings tab coming soon!",e.appendChild(t)}function Y({tabContent:e}){e.innerHTML="";const t=document.createElement("p");t.textContent="Factory tab coming soon!",e.appendChild(t)}function J({tabContent:e}){e.innerHTML="";const t=document.createElement("p");t.textContent="Artifacts tab coming soon!",e.appendChild(t)}function W({tabContent:e}){e.innerHTML="";const t=document.createElement("p");t.textContent="spacecenter tab coming soon!",e.appendChild(t)}function X(){const e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(u)),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","korvkiosk_save.json"),t.click()}function Q(e){const t=new FileReader;t.onload=n=>{try{const r=JSON.parse(n.target.result);Object.assign(u,r),u.korv!==void 0&&x(u.korv),O(),console.log("Save loaded:",u)}catch(r){console.error("Invalid save file",r)}},t.readAsText(e)}function Z({tabContent:e}){const t=document.createElement("div");t.id="settings-container";const n=document.createElement("button");n.textContent="Export Save",n.onclick=X;const r=document.createElement("label");r.textContent="Import Save: ",r.style.display="block",r.style.marginTop="10px";const o=document.createElement("input");o.type="file",o.accept="application/json",o.onchange=s=>{const a=s.target.files[0];a&&Q(a)},r.appendChild(o),t.appendChild(n),t.appendChild(r),e.appendChild(t)}const k=[{id:"kiosk",name:"Kiosk",render:P,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/kiosk/kiosk frame 0.png`},{id:"research",name:"Research",render:R,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/research/beaker-frame-0.png`},{id:"equipment",name:"Equipment",render:j,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/equipment/equipment frame 0.png`},{id:"boogie",name:"Boogie",render:V,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/boogie/duel frame 0.png`},{id:"skills",name:"Skills",render:H,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/Skills/Skill 1 - Throw.png`},{id:"recipes",name:"Recipes",render:z,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/recept/recipe-frame-0-.png`},{id:"buildings",name:"Buildings",render:G,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/building/building upgrade frame 0.png`},{id:"factory",name:"Factory",render:Y,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/fabrik/fabrik frame 0.png`},{id:"artifacts",name:"Artifacts",render:J,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/artifacts/artifacts frame 0.png`},{id:"spacecenter",name:"Spacecenter",render:W,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/spacecenter/spacecenter frame 0.png`},{id:"settings",name:"Settings",render:Z,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/inställningar/settings frame 0.png`}];let l,h;function tt(){document.body.style.display="flex",document.body.style.justifyContent="center",document.body.style.alignItems="center",document.body.style.height="100vh",document.body.style.margin="0",document.body.style.background="#eee";const e=document.createElement("div");e.id="game-ui",e.style.width="1200px",e.style.height="600px",e.style.border="2px solid #444",e.style.display="flex",e.style.flexDirection="column",e.style.background="#f0f0f0",e.style.position="relative",l=document.createElement("div"),l.id="korv-counter",l.textContent="Korv: 0",l.style.position="absolute",l.style.top="10px",l.style.right="10px",l.style.color="#D2B04C",l.style.fontWeight="bold",l.style.fontSize="20px",l.style.fontFamily="monospace, sans-serif",l.style.userSelect="none",l.style.pointerEvents="none";const t=document.createElement("div");t.className="main-screen",t.style.height="400px",t.style.flexShrink="0",t.style.padding="10px",t.style.borderBottom="2px solid #ccc",t.style.background="#fff",t.style.overflow="hidden",h=document.createElement("div"),h.className="tab-buttons",h.style.height="50px",h.style.flexShrink="0",h.style.display="flex",h.style.justifyContent="flex-start",h.style.alignItems="center",h.style.background="#ddd",h.style.borderBottom="2px solid #999";const n=document.createElement("div");n.className="tab-content",n.style.flexGrow="1",n.style.padding="10px",n.style.overflow="auto",n.style.background="#fafafa",e.appendChild(t),e.appendChild(h),e.appendChild(n),e.appendChild(l),document.body.appendChild(e),k.filter(s=>s.unlocked).forEach(s=>{const a=document.createElement("button");a.id=`btn-${s.id}`,a.style.padding="5px 10px",a.style.fontSize="16px",a.style.cursor="pointer",a.innerHTML=`
      <img src="${s.icon}" alt="${s.name}"
           style="width:32px; height:32px; vertical-align:middle; margin-right:5px;">
      ${s.name}
    `,a.onclick=()=>r(s.id),h.appendChild(a)});function r(s){const a=k.find(c=>c.id===s);a&&(n.innerHTML="",t.innerHTML="",a.render({tabContent:n,mainScreen:t})),o(s)}function o(s){k.forEach(a=>{const c=document.getElementById(`btn-${a.id}`);c&&c.classList.toggle("active",a.id===s)})}r(k[0].id)}setInterval(()=>{x(u.korv)},1e3);function x(){l&&(l.textContent=`Korv: ${u.korv} / ${u.korvtak}`)}function et(){tt()}document.addEventListener("DOMContentLoaded",()=>{et()});
