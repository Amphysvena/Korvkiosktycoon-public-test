function F(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var C,D;function K(){return D||(D=1,C=function(t,e,n){if(t==null||e==null)return t;var r=String(t),o=typeof e=="number"?e:parseInt(e,10);if(isNaN(o)||!isFinite(o))return r;var s=r.length;if(s>=o)return r;var a=n==null?"":String(n);a===""&&(a=" ");for(var c=o-s;a.length<c;)a+=a;var l=a.length>c?a.substr(0,c):a;return r+l}),C}var P=K();const T=F(P);var x=9e15,q=function(){for(var t=[],e=-323;e<=308;e++)t.push(+("1e"+e));return function(n){return t[n+323]}}(),i=function(t){return t instanceof M?t:new M(t)},v=function(t,e){return new M().fromMantissaExponent(t,e)},E=function(t,e){return new M().fromMantissaExponent_noNormalize(t,e)};function U(t,e,n,r){var o=e.mul(n.pow(r));return M.floor(t.div(o).mul(n.sub(1)).add(1).log10()/n.log10())}function H(t,e,n,r){return e.mul(n.pow(r)).mul(M.sub(1,n.pow(t))).div(M.sub(1,n))}var M=function(){function t(e){this.mantissa=NaN,this.exponent=NaN,e===void 0?(this.m=0,this.e=0):e instanceof t?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):this.fromString(e)}return Object.defineProperty(t.prototype,"m",{get:function(){return this.mantissa},set:function(e){this.mantissa=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"e",{get:function(){return this.exponent},set:function(e){this.exponent=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"s",{get:function(){return this.sign()},set:function(e){if(e===0)return this.e=0,void(this.m=0);this.sgn()!==e&&(this.m=-this.m)},enumerable:!1,configurable:!0}),t.fromMantissaExponent=function(e,n){return new t().fromMantissaExponent(e,n)},t.fromMantissaExponent_noNormalize=function(e,n){return new t().fromMantissaExponent_noNormalize(e,n)},t.fromDecimal=function(e){return new t().fromDecimal(e)},t.fromNumber=function(e){return new t().fromNumber(e)},t.fromString=function(e){return new t().fromString(e)},t.fromValue=function(e){return new t().fromValue(e)},t.fromValue_noAlloc=function(e){return e instanceof t?e:new t(e)},t.abs=function(e){return i(e).abs()},t.neg=function(e){return i(e).neg()},t.negate=function(e){return i(e).neg()},t.negated=function(e){return i(e).neg()},t.sign=function(e){return i(e).sign()},t.sgn=function(e){return i(e).sign()},t.round=function(e){return i(e).round()},t.floor=function(e){return i(e).floor()},t.ceil=function(e){return i(e).ceil()},t.trunc=function(e){return i(e).trunc()},t.add=function(e,n){return i(e).add(n)},t.plus=function(e,n){return i(e).add(n)},t.sub=function(e,n){return i(e).sub(n)},t.subtract=function(e,n){return i(e).sub(n)},t.minus=function(e,n){return i(e).sub(n)},t.mul=function(e,n){return i(e).mul(n)},t.multiply=function(e,n){return i(e).mul(n)},t.times=function(e,n){return i(e).mul(n)},t.div=function(e,n){return i(e).div(n)},t.divide=function(e,n){return i(e).div(n)},t.recip=function(e){return i(e).recip()},t.reciprocal=function(e){return i(e).recip()},t.reciprocate=function(e){return i(e).reciprocate()},t.cmp=function(e,n){return i(e).cmp(n)},t.compare=function(e,n){return i(e).cmp(n)},t.eq=function(e,n){return i(e).eq(n)},t.equals=function(e,n){return i(e).eq(n)},t.neq=function(e,n){return i(e).neq(n)},t.notEquals=function(e,n){return i(e).notEquals(n)},t.lt=function(e,n){return i(e).lt(n)},t.lte=function(e,n){return i(e).lte(n)},t.gt=function(e,n){return i(e).gt(n)},t.gte=function(e,n){return i(e).gte(n)},t.max=function(e,n){return i(e).max(n)},t.min=function(e,n){return i(e).min(n)},t.clamp=function(e,n,r){return i(e).clamp(n,r)},t.clampMin=function(e,n){return i(e).clampMin(n)},t.clampMax=function(e,n){return i(e).clampMax(n)},t.cmp_tolerance=function(e,n,r){return i(e).cmp_tolerance(n,r)},t.compare_tolerance=function(e,n,r){return i(e).cmp_tolerance(n,r)},t.eq_tolerance=function(e,n,r){return i(e).eq_tolerance(n,r)},t.equals_tolerance=function(e,n,r){return i(e).eq_tolerance(n,r)},t.neq_tolerance=function(e,n,r){return i(e).neq_tolerance(n,r)},t.notEquals_tolerance=function(e,n,r){return i(e).notEquals_tolerance(n,r)},t.lt_tolerance=function(e,n,r){return i(e).lt_tolerance(n,r)},t.lte_tolerance=function(e,n,r){return i(e).lte_tolerance(n,r)},t.gt_tolerance=function(e,n,r){return i(e).gt_tolerance(n,r)},t.gte_tolerance=function(e,n,r){return i(e).gte_tolerance(n,r)},t.log10=function(e){return i(e).log10()},t.absLog10=function(e){return i(e).absLog10()},t.pLog10=function(e){return i(e).pLog10()},t.log=function(e,n){return i(e).log(n)},t.log2=function(e){return i(e).log2()},t.ln=function(e){return i(e).ln()},t.logarithm=function(e,n){return i(e).logarithm(n)},t.pow10=function(e){return Number.isInteger(e)?E(1,e):v(Math.pow(10,e%1),Math.trunc(e))},t.pow=function(e,n){return typeof e=="number"&&e===10&&typeof n=="number"&&Number.isInteger(n)?E(1,n):i(e).pow(n)},t.exp=function(e){return i(e).exp()},t.sqr=function(e){return i(e).sqr()},t.sqrt=function(e){return i(e).sqrt()},t.cube=function(e){return i(e).cube()},t.cbrt=function(e){return i(e).cbrt()},t.dp=function(e){return i(e).dp()},t.decimalPlaces=function(e){return i(e).dp()},t.affordGeometricSeries=function(e,n,r,o){return U(i(e),i(n),i(r),o)},t.sumGeometricSeries=function(e,n,r,o){return H(e,i(n),i(r),o)},t.affordArithmeticSeries=function(e,n,r,o){return function(s,a,c,l){var p=a.add(l.mul(c)).sub(c.div(2)),f=p.pow(2);return p.neg().add(f.add(c.mul(s).mul(2)).sqrt()).div(c).floor()}(i(e),i(n),i(r),i(o))},t.sumArithmeticSeries=function(e,n,r,o){return function(s,a,c,l){var p=a.add(l.mul(c));return s.div(2).mul(p.mul(2).plus(s.sub(1).mul(c)))}(i(e),i(n),i(r),i(o))},t.efficiencyOfPurchase=function(e,n,r){return function(o,s,a){return o.div(s).add(o.div(a))}(i(e),i(n),i(r))},t.randomDecimalForTesting=function(e){if(20*Math.random()<1)return E(0,0);var n=10*Math.random();10*Math.random()<1&&(n=Math.round(n)),n*=Math.sign(2*Math.random()-1);var r=Math.floor(Math.random()*e*2)-e;return v(n,r)},t.prototype.normalize=function(){if(this.m>=1&&this.m<10)return this;if(this.m===0)return this.m=0,this.e=0,this;var e=Math.floor(Math.log10(Math.abs(this.m)));return this.m=e===-324?10*this.m/1e-323:this.m/q(e),this.e+=e,this},t.prototype.fromMantissaExponent=function(e,n){return isFinite(e)&&isFinite(n)?(this.m=e,this.e=n,this.normalize(),this):(e=Number.NaN,n=Number.NaN,this)},t.prototype.fromMantissaExponent_noNormalize=function(e,n){return this.m=e,this.e=n,this},t.prototype.fromDecimal=function(e){return this.m=e.m,this.e=e.e,this},t.prototype.fromNumber=function(e){return isNaN(e)?(this.m=Number.NaN,this.e=Number.NaN):e===Number.POSITIVE_INFINITY?(this.m=1,this.e=x):e===Number.NEGATIVE_INFINITY?(this.m=-1,this.e=x):e===0?(this.m=0,this.e=0):(this.e=Math.floor(Math.log10(Math.abs(e))),this.m=this.e===-324?10*e/1e-323:e/q(this.e),this.normalize()),this},t.prototype.fromString=function(e){if(e.indexOf("e")!==-1){var n=e.split("e");this.m=parseFloat(n[0]),this.e=parseFloat(n[1]),this.normalize()}else if(e==="NaN")this.m=Number.NaN,this.e=Number.NaN;else if(this.fromNumber(parseFloat(e)),isNaN(this.m))throw Error("[DecimalError] Invalid argument: "+e);return this},t.prototype.fromValue=function(e){return e instanceof t?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.m=0,this.e=0,this)},t.prototype.toNumber=function(){if(!isFinite(this.e))return Number.NaN;if(this.e>308)return this.m>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;if(this.e<-324)return 0;if(this.e===-324)return this.m>0?5e-324:-5e-324;var e=this.m*q(this.e);if(!isFinite(e)||this.e<0)return e;var n=Math.round(e);return Math.abs(n-e)<1e-10?n:e},t.prototype.mantissaWithDecimalPlaces=function(e){if(isNaN(this.m)||isNaN(this.e))return Number.NaN;if(this.m===0)return 0;var n=e+1,r=Math.ceil(Math.log10(Math.abs(this.m))),o=Math.round(this.m*Math.pow(10,n-r))*Math.pow(10,r-n);return parseFloat(o.toFixed(Math.max(n-r,0)))},t.prototype.toString=function(){return isNaN(this.m)||isNaN(this.e)?"NaN":this.e>=x?this.m>0?"Infinity":"-Infinity":this.e<=-x||this.m===0?"0":this.e<21&&this.e>-7?this.toNumber().toString():this.m+"e"+(this.e>=0?"+":"")+this.e},t.prototype.toExponential=function(e){if(isNaN(this.m)||isNaN(this.e))return"NaN";if(this.e>=x)return this.m>0?"Infinity":"-Infinity";if(this.e<=-x||this.m===0)return"0"+(e>0?T(".",e+1,"0"):"")+"e+0";if(this.e>-324&&this.e<308)return this.toNumber().toExponential(e);isFinite(e)||(e=17);var n=e+1,r=Math.max(1,Math.ceil(Math.log10(Math.abs(this.m))));return(Math.round(this.m*Math.pow(10,n-r))*Math.pow(10,r-n)).toFixed(Math.max(n-r,0))+"e"+(this.e>=0?"+":"")+this.e},t.prototype.toFixed=function(e){return isNaN(this.m)||isNaN(this.e)?"NaN":this.e>=x?this.m>0?"Infinity":"-Infinity":this.e<=-x||this.m===0?"0"+(e>0?T(".",e+1,"0"):""):this.e>=17?this.m.toString().replace(".","").padEnd(this.e+1,"0")+(e>0?T(".",e+1,"0"):""):this.toNumber().toFixed(e)},t.prototype.toPrecision=function(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.e-1):this.toExponential(e-1)},t.prototype.valueOf=function(){return this.toString()},t.prototype.toJSON=function(){return this.toString()},t.prototype.toStringWithDecimalPlaces=function(e){return this.toExponential(e)},t.prototype.abs=function(){return E(Math.abs(this.m),this.e)},t.prototype.neg=function(){return E(-this.m,this.e)},t.prototype.negate=function(){return this.neg()},t.prototype.negated=function(){return this.neg()},t.prototype.sign=function(){return Math.sign(this.m)},t.prototype.sgn=function(){return this.sign()},t.prototype.round=function(){return this.e<-1?new t(0):this.e<17?new t(Math.round(this.toNumber())):this},t.prototype.floor=function(){return this.e<-1?Math.sign(this.m)>=0?new t(0):new t(-1):this.e<17?new t(Math.floor(this.toNumber())):this},t.prototype.ceil=function(){return this.e<-1?Math.sign(this.m)>0?new t(1):new t(0):this.e<17?new t(Math.ceil(this.toNumber())):this},t.prototype.trunc=function(){return this.e<0?new t(0):this.e<17?new t(Math.trunc(this.toNumber())):this},t.prototype.add=function(e){var n,r,o=i(e);if(this.m===0)return o;if(o.m===0)return this;if(this.e>=o.e?(n=this,r=o):(n=o,r=this),n.e-r.e>17)return n;var s=Math.round(1e14*n.m+1e14*r.m*q(r.e-n.e));return v(s,n.e-14)},t.prototype.plus=function(e){return this.add(e)},t.prototype.sub=function(e){return this.add(i(e).neg())},t.prototype.subtract=function(e){return this.sub(e)},t.prototype.minus=function(e){return this.sub(e)},t.prototype.mul=function(e){if(typeof e=="number")return e<1e307&&e>-1e307?v(this.m*e,this.e):v(1e-307*this.m*e,this.e+307);var n=typeof e=="string"?new t(e):e;return v(this.m*n.m,this.e+n.e)},t.prototype.multiply=function(e){return this.mul(e)},t.prototype.times=function(e){return this.mul(e)},t.prototype.div=function(e){return this.mul(i(e).recip())},t.prototype.divide=function(e){return this.div(e)},t.prototype.divideBy=function(e){return this.div(e)},t.prototype.dividedBy=function(e){return this.div(e)},t.prototype.recip=function(){return v(1/this.m,-this.e)},t.prototype.reciprocal=function(){return this.recip()},t.prototype.reciprocate=function(){return this.recip()},t.prototype.cmp=function(e){var n=i(e);if(this.m===0){if(n.m===0)return 0;if(n.m<0)return 1;if(n.m>0)return-1}if(n.m===0){if(this.m<0)return-1;if(this.m>0)return 1}if(this.m>0)return n.m<0||this.e>n.e?1:this.e<n.e?-1:this.m>n.m?1:this.m<n.m?-1:0;if(this.m<0)return n.m>0||this.e>n.e?-1:this.e<n.e||this.m>n.m?1:this.m<n.m?-1:0;throw Error("Unreachable code")},t.prototype.compare=function(e){return this.cmp(e)},t.prototype.eq=function(e){var n=i(e);return this.e===n.e&&this.m===n.m},t.prototype.equals=function(e){return this.eq(e)},t.prototype.neq=function(e){return!this.eq(e)},t.prototype.notEquals=function(e){return this.neq(e)},t.prototype.lt=function(e){var n=i(e);return this.m===0?n.m>0:n.m===0?this.m<=0:this.e===n.e?this.m<n.m:this.m>0?n.m>0&&this.e<n.e:n.m>0||this.e>n.e},t.prototype.lte=function(e){return!this.gt(e)},t.prototype.gt=function(e){var n=i(e);return this.m===0?n.m<0:n.m===0?this.m>0:this.e===n.e?this.m>n.m:this.m>0?n.m<0||this.e>n.e:n.m<0&&this.e<n.e},t.prototype.gte=function(e){return!this.lt(e)},t.prototype.max=function(e){var n=i(e);return this.lt(n)?n:this},t.prototype.min=function(e){var n=i(e);return this.gt(n)?n:this},t.prototype.clamp=function(e,n){return this.max(e).min(n)},t.prototype.clampMin=function(e){return this.max(e)},t.prototype.clampMax=function(e){return this.min(e)},t.prototype.cmp_tolerance=function(e,n){var r=i(e);return this.eq_tolerance(r,n)?0:this.cmp(r)},t.prototype.compare_tolerance=function(e,n){return this.cmp_tolerance(e,n)},t.prototype.eq_tolerance=function(e,n){var r=i(e);return t.lte(this.sub(r).abs(),t.max(this.abs(),r.abs()).mul(n))},t.prototype.equals_tolerance=function(e,n){return this.eq_tolerance(e,n)},t.prototype.neq_tolerance=function(e,n){return!this.eq_tolerance(e,n)},t.prototype.notEquals_tolerance=function(e,n){return this.neq_tolerance(e,n)},t.prototype.lt_tolerance=function(e,n){var r=i(e);return!this.eq_tolerance(r,n)&&this.lt(r)},t.prototype.lte_tolerance=function(e,n){var r=i(e);return this.eq_tolerance(r,n)||this.lt(r)},t.prototype.gt_tolerance=function(e,n){var r=i(e);return!this.eq_tolerance(r,n)&&this.gt(r)},t.prototype.gte_tolerance=function(e,n){var r=i(e);return this.eq_tolerance(r,n)||this.gt(r)},t.prototype.log10=function(){return this.e+Math.log10(this.m)},t.prototype.absLog10=function(){return this.e+Math.log10(Math.abs(this.m))},t.prototype.pLog10=function(){return this.m<=0||this.e<0?0:this.log10()},t.prototype.log=function(e){return Math.LN10/Math.log(e)*this.log10()},t.prototype.log2=function(){return 3.321928094887362*this.log10()},t.prototype.ln=function(){return 2.302585092994045*this.log10()},t.prototype.logarithm=function(e){return this.log(e)},t.prototype.pow=function(e){var n,r=e instanceof t?e.toNumber():e,o=this.e*r;if(Number.isSafeInteger(o)&&(n=Math.pow(this.m,r),isFinite(n)&&n!==0))return v(n,o);var s=Math.trunc(o),a=o-s;if(n=Math.pow(10,r*Math.log10(this.m)+a),isFinite(n)&&n!==0)return v(n,s);var c=t.pow10(r*this.absLog10());return this.sign()===-1?Math.abs(r%2)===1?c.neg():Math.abs(r%2)===0?c:new t(Number.NaN):c},t.prototype.pow_base=function(e){return i(e).pow(this)},t.prototype.factorial=function(){var e=this.toNumber()+1;return t.pow(e/Math.E*Math.sqrt(e*Math.sinh(1/e)+1/(810*Math.pow(e,6))),e).mul(Math.sqrt(2*Math.PI/e))},t.prototype.exp=function(){var e=this.toNumber();return-706<e&&e<709?t.fromNumber(Math.exp(e)):t.pow(Math.E,e)},t.prototype.sqr=function(){return v(Math.pow(this.m,2),2*this.e)},t.prototype.sqrt=function(){return this.m<0?new t(Number.NaN):this.e%2!=0?v(3.16227766016838*Math.sqrt(this.m),Math.floor(this.e/2)):v(Math.sqrt(this.m),Math.floor(this.e/2))},t.prototype.cube=function(){return v(Math.pow(this.m,3),3*this.e)},t.prototype.cbrt=function(){var e=1,n=this.m;n<0&&(e=-1,n=-n);var r=e*Math.pow(n,1/3),o=this.e%3;return v(o===1||o===-1?2.154434690031883*r:o!==0?4.641588833612778*r:r,Math.floor(this.e/3))},t.prototype.sinh=function(){return this.exp().sub(this.negate().exp()).div(2)},t.prototype.cosh=function(){return this.exp().add(this.negate().exp()).div(2)},t.prototype.tanh=function(){return this.sinh().div(this.cosh())},t.prototype.asinh=function(){return t.ln(this.add(this.sqr().add(1).sqrt()))},t.prototype.acosh=function(){return t.ln(this.add(this.sqr().sub(1).sqrt()))},t.prototype.atanh=function(){return this.abs().gte(1)?Number.NaN:t.ln(this.add(1).div(new t(1).sub(this)))/2},t.prototype.ascensionPenalty=function(e){return e===0?this:this.pow(Math.pow(10,-e))},t.prototype.egg=function(){return this.add(9)},t.prototype.lessThanOrEqualTo=function(e){return this.cmp(e)<1},t.prototype.lessThan=function(e){return this.cmp(e)<0},t.prototype.greaterThanOrEqualTo=function(e){return this.cmp(e)>-1},t.prototype.greaterThan=function(e){return this.cmp(e)>0},t.prototype.decimalPlaces=function(){return this.dp()},t.prototype.dp=function(){if(!isFinite(this.mantissa))return NaN;if(this.exponent>=17)return 0;for(var e=this.mantissa,n=-this.exponent,r=1;Math.abs(Math.round(e*r)/r-e)>1e-10;)r*=10,n++;return n>0?n:0},Object.defineProperty(t,"MAX_VALUE",{get:function(){return B},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MIN_VALUE",{get:function(){return j},enumerable:!1,configurable:!0}),Object.defineProperty(t,"NUMBER_MAX_VALUE",{get:function(){return O},enumerable:!1,configurable:!0}),Object.defineProperty(t,"NUMBER_MIN_VALUE",{get:function(){return R},enumerable:!1,configurable:!0}),t}(),B=E(1,x),j=E(1,-x),O=i(Number.MAX_VALUE),R=i(Number.MIN_VALUE);const k={autoFry:{name:"autoFry",img:"Research1-Autofry.png",cost:10,duration:30,effectAmount:1,effect:t=>{t.korv+=1,t.korv>t.korvtak&&(t.korv=t.korvtak)},effectInterval:5e3,criteria:t=>t.korv>=10,toggleable:"autoFryActive"},plasticBox:{name:"plastlåda",img:"Research2-plastlada varmkorv.png",cost:100,duration:60,criteria:t=>t.korv>=100,effect:t=>{t.korvtak+=900,t.equipment.plasticBox.unlocked=!0}},fishBox:{name:"fisklåda",img:"Research3-fisklåda.png",cost:750,duration:300,criteria:t=>t.korv>=750},condimentsMachine:{name:"condiments machine",img:"Research4-Condimentmachine.png",criteria:t=>!1}},u={korv:0,korvtak:250,research:{},equipment:{plasticBox:{unlocked:!1,equipped:!1},korv1:{unlocked:!1,equipped:!1},allowedKorvWeapons:[],equippedPrimary:null,equippedSecondary:null},boogie:{maxHP:3,currentHP:3,equippedDamageType:null,attackPower:0,defense:0,statusEffects:[]},autoFryActive:!1};for(const t in k)u.research[t]={unlocked:!1,researching:!1,remainingTime:k[t].duration,completed:!1};function z(){u.korv===void 0&&(u.korv=0),u.korv<u.korvtak?(u.korv+=1,I(u.korv)):console.log("Korvtak reached! No more korv can be added.")}function V(){u.korv+=1e3,u.korv>u.korvtak&&(u.korv=u.korvtak)}const A={korv1:{name:"Cooked hot dog",description:"One generic sausage.",img:"src/game/Assets/img/equipment/Korvknappar/korv1.png"},fuskkorv:{name:"The one doG",description:"The Gods use this to test the limits of their Realm.",img:"src/game/Assets/img/equipment/Korvknappar/korv1.png"}};function W({tabContent:t,mainScreen:e,infoLeft:n,infoRight:r}){t.kioskCleanup&&t.kioskCleanup();const o=document.getElementById("mainscreen-centering");o&&o.remove();const s=document.createElement("div");s.id="mainscreen-centering",s.style.display="flex",s.style.justifyContent="center",s.style.alignItems="flex-start",s.style.height="100%",s.style.width="100%";const a=document.createElement("div");a.id="mainscreen-wrapper",a.style.position="relative",a.style.width="740px",a.style.height="400px";const c=document.createElement("img");c.src=`${KorvkioskData.pluginUrl}src/game/Assets/img/kiosk/korvkioskmainscreen-inprogress.gif`,c.style.display="block",c.style.width="740px",c.style.height="400px",a.appendChild(c);const l=[];u.research.autoFry&&u.research.autoFry.unlocked&&!u.autoFryActive&&l.push(`${KorvkioskData.pluginUrl}src/game/Assets/img/kiosk/autofry.png`),u.autoFryActive&&l.push(`${KorvkioskData.pluginUrl}src/game/Assets/img/kiosk/autofryactive.gif`),l.forEach(m=>{const d=document.createElement("img");d.src=m,d.style.position="absolute",d.style.top="0",d.style.left="0",d.style.width="740px",d.style.height="400px",d.style.pointerEvents="none",a.appendChild(d)}),s.appendChild(a),e.appendChild(s);const p=document.createElement("div");p.id="kiosk-container";for(const m in A){const d=A[m],g=document.createElement("button");g.type="button",g.className="kiosk-button",g.innerHTML=`
      <img src="${KorvkioskData.pluginUrl}${d.img}" 
           alt="${d.name}" style="width:64px; height:64px;">
    `,m==="korv1"&&g.addEventListener("click",z),m==="fuskkorv"&&g.addEventListener("click",V),g.addEventListener("mouseenter",()=>{n&&(n.innerHTML=`
        <div style="font-size: 20px; font-weight: bold; text-decoration: underline; color: black;">
          ${d.name}
        </div>
        <div style="margin-top: 8px; font-size: 16px;">
          ${d.description}
        </div>
      `)}),g.addEventListener("mouseleave",()=>{n&&(n.innerHTML="")}),p.appendChild(g)}t.appendChild(p);function f(){if(!r)return;let m=0;for(const d in k){const g=k[d];g.toggleable&&u[g.toggleable]&&g.effectAmount&&g.effectInterval&&(m+=g.effectAmount/(g.effectInterval/1e3))}r.innerHTML=`
      <div style="font-size: 18px; font-weight: bold; margin-bottom: 10px;">Kiosk Stats</div>
      <div>Passive Income: ${m.toFixed(2)} korv/sec</div>
    `}f();const h=setInterval(f,3e4);t.kioskCleanup=()=>clearInterval(h)}function G(){for(const t in k){const e=k[t],n=u.research[t];!n.unlocked&&e.criteria(u)&&(n.unlocked=!0,console.log(`${e.name} unlocked!`))}}function $(t){const e=u.research[t],n=k[t],r=setInterval(()=>{e.remainingTime--,e.remainingTime<=0&&(clearInterval(r),e.remainingTime=0,e.researching=!1,e.completed=!0,console.log(`${n.name} research complete!`),!n.toggleable&&typeof n.effect=="function"&&n.effect(u))},1e3)}function Y(t){const e=u.research[t],n=k[t];if(!e.researching&&!e.completed){if(u.korv<n.cost){console.log(`Not enough korv to start ${n.name} research!`);return}u.korv-=n.cost,e.researching=!0,e.remainingTime=n.duration,console.log(`${n.name} research started! ${n.cost} korv deducted.`),$(t)}}function J(){for(const t in u.research){const e=u.research[t];e.researching&&!e.completed&&($(t),console.log(`Resuming ${k[t].name} research timer...`))}}for(const t in k){const e=k[t];e.effect&&e.effectInterval&&setInterval(()=>{u.research[t].completed&&(e.toggleable&&!u[e.toggleable]||e.effect(u))},e.effectInterval)}function X(){console.log("Cheat: setting all active research timers to 1 second left");for(const t in u.research){const e=u.research[t];e.researching&&!e.completed&&(e.remainingTime=1,console.log(`${t} set to 1 second remaining`))}}function Q({tabContent:t,mainScreen:e}){e.innerHTML=`
    <div style="display:flex; justify-content:center; align-items:center; height:100%;">
      <img src="${KorvkioskData.pluginUrl}src/game/Assets/img/research/researchmainscreen.gif"
           style="max-height:auto; max-width:auto;">
    </div>
  `,t.innerHTML="",G();function n(o){const s=u.research[o],a=k[o];if(!s.unlocked)return null;const c=document.createElement("button");c.style.width="64px",c.style.height="64px",c.style.position="relative",c.style.border="none",c.style.padding="0",c.style.cursor="pointer";const l=document.createElement("img");l.src=`${KorvkioskData.pluginUrl}src/game/Assets/img/research/${a.img}`,l.style.width="64px",l.style.height="64px",l.style.display="block",c.appendChild(l);const p=document.createElement("div");p.style.position="absolute",p.style.bottom="-20px",p.style.width="100%",p.style.textAlign="center",p.style.fontSize="14px",c.appendChild(p);function f(){if(s.researching)c.disabled=!0,l.style.opacity="0.5",p.textContent=`${s.remainingTime}s`;else if(!s.completed)c.disabled=!1,l.style.opacity="0.5",p.textContent=`${a.duration}s`;else{const h=a.toggleable;c.disabled=!1,h?(l.style.opacity=u[h]?"1":"0.5",p.textContent=u[h]?"ON":"OFF"):(l.style.opacity="0.5",p.textContent="✓")}}return c.addEventListener("click",()=>{!s.researching&&!s.completed?Y(o):s.completed&&a.toggleable&&(u[a.toggleable]=!u[a.toggleable]),f()}),setInterval(f,1e3),f(),c}for(const o in k){const s=n(o);s&&t.appendChild(s)}const r=document.createElement("button");r.type="button",r.id="finishResearchButton",r.textContent="Finish Research",r.style.width="120px",r.style.height="40px",r.style.marginLeft="10px",r.addEventListener("click",X),t.appendChild(r)}const N={plasticBox:{name:"Plastlåda",img:"src/game/Assets/img/equipment/korvlador/Korvlada1-plastladavarmkorv.png",effectDescription:"Can cook some basic sausage types.",itemDescription:"An old laundry box repurposed for sausage creation. The boiling water smells like detergent.",slot:"korvBox",toggleable:null,onEquip:t=>{t.equipment.korv1.unlocked||(t.equipment.korv1.unlocked=!0,console.log("Kokt korv med bröd (korv1) unlocked!")),t.equipment.allowedKorvWeapons=["korv1","korv2","korv3"]},onUnequip:null},korv1:{name:"Kokt korv med bröd",img:"src/game/Assets/img/equipment/Korvknappar/korv1.png",slot:"primaryHand",effectDescription:"A basic sausage with nothing on it.",itemDescription:"A lukewarm sausage in mushy bread. No condiments.",toggleable:!0,onEquip:t=>{t.boogie.equippedDamageType="normal",t.boogie.attackPower+=1},onUnequip:t=>{t.boogie.equippedDamageType=null,t.boogie.attackPower-=1}}};function Z(t,e,n,r,o){const s=u.equipment[t],a=N[t];if(!s||!s.unlocked)return null;const c=document.createElement("button");c.style.width="64px",c.style.height="64px",c.style.position="relative",c.style.border="none",c.style.padding="0",c.style.cursor="pointer";const l=document.createElement("img");l.src=`${KorvkioskData.pluginUrl}${a.img}`,l.style.width="64px",l.style.height="64px",l.style.display="block",l.style.transition="opacity 0.2s",c.appendChild(l),a.effectDescription&&(c.title=a.effectDescription),c.addEventListener("mouseenter",()=>{r&&(r.innerHTML=a.itemDescription||"No description available")}),c.addEventListener("mouseleave",()=>{r&&(r.innerHTML="Hover over an item for information")}),o||(o=document.createElement("div"),o.id="info-right",n.parentElement.appendChild(o));function p(){const m=u.boogie;o.innerHTML=`
      <div>HP: ${m.currentHP} / ${m.maxHP}</div>
      <div>Attack: ${m.attackPower}</div>
      <div>Defense: ${m.defense}</div>
      <div>Damage Type: ${m.equippedDamageType||"None"}</div>
      <div>Status Effects: ${m.statusEffects.length>0?m.statusEffects.join(", "):"None"}</div>
    `}p();function f(){l.style.opacity=s.equipped?"1":"0.4"}function h(){const m=document.querySelector(`#slot-${a.slot} img`);m&&(s.equipped?(m.src=`${KorvkioskData.pluginUrl}${a.img}`,m.style.opacity="1"):(m.src=`${KorvkioskData.pluginUrl}src/game/Assets/img/boogie/duelframe0.png`,m.style.opacity="0.5"))}return f(),h(),c.addEventListener("click",()=>{if(s.equipped){s.equipped=!1,a.onUnequip&&a.onUnequip(u),f(),h(),p();return}for(const m in N){const d=u.equipment[m];if(d&&d.equipped&&N[m].slot===a.slot){d.equipped=!1,N[m].onUnequip&&N[m].onUnequip(u);const g=document.querySelector(`#slot-${N[m].slot} img`);g&&(g.src=`${KorvkioskData.pluginUrl}src/game/Assets/img/boogie/duelframe0.png`,g.style.opacity="0.5")}}s.equipped=!0,a.onEquip&&a.onEquip(u),L({tabContent:e,mainScreen:n,infoLeft:r,infoRight:o}),f(),h(),p()}),c}function _(t,e,n,r,o,s){e.innerHTML="";for(const a in N){const c=N[a],l=u.equipment[a];if(!l||!l.unlocked||c.slot!==t)continue;const p=Z(a,n,r,o,s);p&&e.appendChild(p)}}function L({tabContent:t,mainScreen:e,infoLeft:n,infoRight:r}){e.innerHTML="",t.innerHTML="";const o=document.createElement("div");o.style.width="740px",o.style.height="400px",o.style.display="grid",o.style.gridTemplateColumns="repeat(4, 1fr)",o.style.justifyItems="center",o.style.alignItems="center",o.style.gap="20px",o.style.border="solid";const s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.display="flex",s.style.justifyContent="center",s.style.alignItems="center",s.appendChild(o),e.appendChild(s);const a=[{name:"Primary Hand",key:"primaryHand"},{name:"Secondary Hand",key:"secondaryHand"},{name:"Hatt",key:"hat"},{name:"Korvlåda",key:"korvBox"}];a.forEach(f=>{const h=document.createElement("div");h.id=`slot-${f.key}`,h.style.display="flex",h.style.flexDirection="column",h.style.alignItems="center";const m=document.createElement("p");m.textContent=f.name,m.style.margin="0 0 8px 0",m.style.fontWeight="bold",h.appendChild(m);const d=document.createElement("img");d.alt=f.name,d.style.width="64px",d.style.height="64px",d.style.border="2px solid #444",d.style.borderRadius="8px";let g=Object.keys(u.equipment).find(S=>u.equipment[S]?.equipped&&N[S]?.slot===f.key);g?(d.src=`${KorvkioskData.pluginUrl}${N[g].img}`,d.style.opacity="1"):(d.src=`${KorvkioskData.pluginUrl}src/game/Assets/img/boogie/duelframe0.png`,d.style.opacity="0.5"),h.appendChild(d),o.appendChild(h)});let c=a[0].key;const l=document.createElement("div");l.style.display="flex",l.style.justifyContent="space-around",l.style.alignItems="flex-start",l.style.height="40px",l.style.marginBottom="8px";const p=document.createElement("div");p.style.display="flex",p.style.flexWrap="wrap",p.style.justifyContent="left",p.style.gap="5px",p.style.marginTop="1px",a.forEach(f=>{const h=document.createElement("button");h.textContent=f.name,h.style.flex="1",h.style.margin="0 5px",h.style.padding="8px",h.style.cursor="pointer",h.style.fontWeight=c===f.key?"bold":"normal",h.addEventListener("click",()=>{c=f.key,_(c,p,t,e,n,r),Array.from(l.children).forEach(m=>m.style.fontWeight="normal"),h.style.fontWeight="bold"}),l.appendChild(h)}),t.appendChild(l),t.appendChild(p),_(c,p,t,e,n,r),n&&(n.innerHTML="Select an item for info")}function ee({tabContent:t}){t.innerHTML="";const e=document.createElement("p");e.textContent="Boogie tab coming soon!",t.appendChild(e)}function te({tabContent:t}){t.innerHTML="";const e=document.createElement("p");e.textContent="Skills tab coming soon!",t.appendChild(e)}function ne({tabContent:t}){t.innerHTML="";const e=document.createElement("p");e.textContent="Recipes tab coming soon!",t.appendChild(e)}function re({tabContent:t}){t.innerHTML="";const e=document.createElement("p");e.textContent="Buildings tab coming soon!",t.appendChild(e)}function ie({tabContent:t}){t.innerHTML="";const e=document.createElement("p");e.textContent="Factory tab coming soon!",t.appendChild(e)}function oe({tabContent:t}){t.innerHTML="";const e=document.createElement("p");e.textContent="Artifacts tab coming soon!",t.appendChild(e)}function se({tabContent:t}){t.innerHTML="";const e=document.createElement("p");e.textContent="spacecenter tab coming soon!",t.appendChild(e)}function ae(){const t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(u)),e=document.createElement("a");e.setAttribute("href",t),e.setAttribute("download","korvkiosk_save.json"),e.click()}function ce(t){const e=new FileReader;e.onload=n=>{try{const r=JSON.parse(n.target.result);Object.assign(u,r),u.korv!==void 0&&I(u.korv),J(),console.log("Save loaded:",u)}catch(r){console.error("Invalid save file",r)}},e.readAsText(t)}function ue({tabContent:t}){const e=document.createElement("div");e.id="settings-container";const n=document.createElement("button");n.textContent="Export Save",n.onclick=ae;const r=document.createElement("label");r.textContent="Import Save: ",r.style.display="block",r.style.marginTop="10px";const o=document.createElement("input");o.type="file",o.accept="application/json",o.onchange=s=>{const a=s.target.files[0];a&&ce(a)},r.appendChild(o),e.appendChild(n),e.appendChild(r),t.appendChild(e)}const w=[{id:"kiosk",name:"Kiosk",render:W,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/kiosk/kiosk frame 0.png`},{id:"research",name:"Research",render:Q,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/research/beaker-frame-0.png`},{id:"equipment",name:"Equipment",render:L,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/equipment/equipment frame 0.png`},{id:"boogie",name:"Boogie",render:ee,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/boogie/duelframe0.png`},{id:"skills",name:"Skills",render:te,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/Skills/Skill 1 - Throw.png`},{id:"recipes",name:"Recipes",render:ne,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/recept/recipe-frame-0-.png`},{id:"buildings",name:"Buildings",render:re,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/building/building upgrade frame 0.png`},{id:"factory",name:"Factory",render:ie,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/fabrik/fabrik frame 0.png`},{id:"artifacts",name:"Artifacts",render:oe,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/artifacts/artifacts frame 0.png`},{id:"spacecenter",name:"Spacecenter",render:se,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/spacecenter/spacecenter frame 0.png`},{id:"settings",name:"Settings",render:ue,unlocked:!0,icon:`${KorvkioskData.pluginUrl}src/game/Assets/img/inställningar/settings frame 0.png`}];let y,b;function le(){document.body.style.display="flex",document.body.style.justifyContent="center",document.body.style.alignItems="center",document.body.style.height="100vh",document.body.style.margin="0",document.body.style.background="#eee";const t=document.createElement("div");t.id="game-ui",t.style.width="1200px",t.style.height="600px",t.style.border="2px solid #444",t.style.display="flex",t.style.flexDirection="column",t.style.background="#f0f0f0",t.style.position="relative",y=document.createElement("div"),y.id="korv-counter",y.textContent="Korv: 0",y.style.position="absolute",y.style.top="10px",y.style.right="10px",y.style.color="#D2B04C",y.style.fontWeight="bold",y.style.fontSize="20px",y.style.fontFamily="monospace, sans-serif",y.style.userSelect="none",y.style.pointerEvents="none";const e=document.createElement("div");e.style.width="1200px",e.style.height="400px",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e.style.background="#000",e.style.position="relative";const n=document.createElement("div");n.id="info-left",n.style.width="230px",n.style.height="100%",n.style.background="#e5e5e5",n.style.padding="10px",n.style.boxSizing="border-box",n.style.overflowY="auto",n.style.fontFamily="Arial, sans-serif",n.style.fontSize="20px",n.style.color="black",n.style.fontWeight="bold",n.style.display="flex",n.style.flexDirection="column",n.style.justifyContent="center",n.style.alignItems="center";const r=document.createElement("div");r.className="main-screen",r.style.width="740px",r.style.height="100%",r.style.background="#e5e5e5",r.style.display="flex",r.style.justifyContent="center",r.style.alignItems="center",r.style.overflow="hidden";const o=document.createElement("div");o.id="info-right",o.style.width="230px",o.style.height="100%",o.style.background="#e5e5e5",o.style.color="#111",o.style.padding="10px",o.style.boxSizing="border-box",o.style.overflowY="auto",o.style.fontFamily="Arial, sans-serif",o.style.fontSize="20px",o.style.color="black",o.style.fontWeight="bold",o.style.display="flex",o.style.flexDirection="column",o.style.justifyContent="center",o.style.alignItems="center",e.appendChild(n),e.appendChild(r),e.appendChild(o),b=document.createElement("div"),b.className="tab-buttons",b.style.height="50px",b.style.flexShrink="0",b.style.display="flex",b.style.justifyContent="flex-start",b.style.alignItems="center",b.style.background="#ddd",b.style.borderBottom="2px solid #999";const s=document.createElement("div");s.className="tab-content",s.style.flexGrow="1",s.style.padding="10px",s.style.overflow="auto",s.style.background="#fafafa",t.appendChild(e),t.appendChild(b),t.appendChild(s),t.appendChild(y),document.body.appendChild(t),w.filter(l=>l.unlocked).forEach(l=>{const p=document.createElement("button");p.id=`btn-${l.id}`,p.style.padding="0px 10px",p.style.fontSize="16px",p.style.cursor="pointer",p.innerHTML=`
      <img src="${l.icon}" alt="${l.name}" style="width:32px; height:32px; vertical-align:middle; margin-right:5px;">
      ${l.name}
    `,p.onclick=()=>a(l.id),b.appendChild(p)});function a(l){const p=w.find(f=>f.id===l);p&&(s.innerHTML="",r.innerHTML="",n.innerHTML="",o.innerHTML="",p.render({tabContent:s,mainScreen:r,infoLeft:n,infoRight:o})),c(l)}function c(l){w.forEach(p=>{const f=document.getElementById(`btn-${p.id}`);f&&f.classList.toggle("active",p.id===l)})}a(w[0].id)}setInterval(()=>{I(u.korv)},1e3);function I(){y&&(y.textContent=`Korv: ${u.korv} / ${u.korvtak}`)}function pe(){le()}document.addEventListener("DOMContentLoaded",()=>{pe()});
